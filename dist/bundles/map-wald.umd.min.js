!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("@ng-bootstrap/ng-bootstrap"),require("@angular/common/http"),require("ngx-pipes"),require("@agm/core"),require("@angular/common"),require("rxjs"),require("rxjs/operators"),require("dap-query-js/dist/dap-query"),require("proj4"),require("store"),require("@agm/core/services/google-maps-types"),require("plotly.js/dist/plotly-basic")):"function"==typeof define&&define.amd?define("map-wald",["exports","@angular/core","@angular/forms","@ng-bootstrap/ng-bootstrap","@angular/common/http","ngx-pipes","@agm/core","@angular/common","rxjs","rxjs/operators","dap-query-js/dist/dap-query","proj4","store","@agm/core/services/google-maps-types","plotly.js/dist/plotly-basic"],e):e((t=t||self)["map-wald"]={},t.ng.core,t.ng.forms,t.ngBootstrap,t.ng.common.http,t.ngxPipes,t.core$1,t.ng.common,t.rxjs,t.rxjs.operators,t.dapQuery,t.proj4,t.store,t.googleMapsTypes,t.plotlyBasic)}(this,(function(t,e,r,n,i,o,a,s,g,p,l,b,c,u,d){"use strict";var h="default"in b?b.default:b;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function y(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,r,a):i(e,r))||a);return o>3&&a&&Object.defineProperty(e,r,a),a}function f(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function m(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function v(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function I(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t}var C=function(){function t(){}return t.prototype.filterTree=function(t,e){var r=this;t.visible=!1,e=e.trim().toLowerCase();return t.visible=function(t,e){return-1!==t.trim().toLowerCase().indexOf(e)}(t.label,e),t.hasOwnProperty("children")&&(t.visible?t.children.forEach((function(t){return r.showAll(t)})):t.children.map((function(n){r.filterTree(n,e),t.visible=t.visible||n.visible,t.expanded=t.expanded||n.visible||n.expanded}))),t},t.prototype.showAll=function(t){var e=this;t.visible=!0,t.hasOwnProperty("children")&&t.children.forEach((function(t){return e.showAll(t)}))},t=y([e.Injectable(),f("design:paramtypes",[])],t)}(),w={Accent:{3:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)"],4:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)"],5:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)"],6:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)","rgb(240,2,127)"],7:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)","rgb(240,2,127)","rgb(191,91,23)"],8:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)","rgb(240,2,127)","rgb(191,91,23)","rgb(102,102,102)"],type:"qual"},Blues:{3:["rgb(222,235,247)","rgb(158,202,225)","rgb(49,130,189)"],4:["rgb(239,243,255)","rgb(189,215,231)","rgb(107,174,214)","rgb(33,113,181)"],5:["rgb(239,243,255)","rgb(189,215,231)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],6:["rgb(239,243,255)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],7:["rgb(239,243,255)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,69,148)"],8:["rgb(247,251,255)","rgb(222,235,247)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,69,148)"],9:["rgb(247,251,255)","rgb(222,235,247)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,81,156)","rgb(8,48,107)"],type:"seq"},BrBG:{10:["rgb(84,48,5)","rgb(140,81,10)","rgb(191,129,45)","rgb(223,194,125)","rgb(246,232,195)","rgb(199,234,229)","rgb(128,205,193)","rgb(53,151,143)","rgb(1,102,94)","rgb(0,60,48)"],11:["rgb(84,48,5)","rgb(140,81,10)","rgb(191,129,45)","rgb(223,194,125)","rgb(246,232,195)","rgb(245,245,245)","rgb(199,234,229)","rgb(128,205,193)","rgb(53,151,143)","rgb(1,102,94)","rgb(0,60,48)"],3:["rgb(216,179,101)","rgb(245,245,245)","rgb(90,180,172)"],4:["rgb(166,97,26)","rgb(223,194,125)","rgb(128,205,193)","rgb(1,133,113)"],5:["rgb(166,97,26)","rgb(223,194,125)","rgb(245,245,245)","rgb(128,205,193)","rgb(1,133,113)"],6:["rgb(140,81,10)","rgb(216,179,101)","rgb(246,232,195)","rgb(199,234,229)","rgb(90,180,172)","rgb(1,102,94)"],7:["rgb(140,81,10)","rgb(216,179,101)","rgb(246,232,195)","rgb(245,245,245)","rgb(199,234,229)","rgb(90,180,172)","rgb(1,102,94)"],8:["rgb(140,81,10)","rgb(191,129,45)","rgb(223,194,125)","rgb(246,232,195)","rgb(199,234,229)","rgb(128,205,193)","rgb(53,151,143)","rgb(1,102,94)"],9:["rgb(140,81,10)","rgb(191,129,45)","rgb(223,194,125)","rgb(246,232,195)","rgb(245,245,245)","rgb(199,234,229)","rgb(128,205,193)","rgb(53,151,143)","rgb(1,102,94)"],type:"div"},BuGn:{3:["rgb(229,245,249)","rgb(153,216,201)","rgb(44,162,95)"],4:["rgb(237,248,251)","rgb(178,226,226)","rgb(102,194,164)","rgb(35,139,69)"],5:["rgb(237,248,251)","rgb(178,226,226)","rgb(102,194,164)","rgb(44,162,95)","rgb(0,109,44)"],6:["rgb(237,248,251)","rgb(204,236,230)","rgb(153,216,201)","rgb(102,194,164)","rgb(44,162,95)","rgb(0,109,44)"],7:["rgb(237,248,251)","rgb(204,236,230)","rgb(153,216,201)","rgb(102,194,164)","rgb(65,174,118)","rgb(35,139,69)","rgb(0,88,36)"],8:["rgb(247,252,253)","rgb(229,245,249)","rgb(204,236,230)","rgb(153,216,201)","rgb(102,194,164)","rgb(65,174,118)","rgb(35,139,69)","rgb(0,88,36)"],9:["rgb(247,252,253)","rgb(229,245,249)","rgb(204,236,230)","rgb(153,216,201)","rgb(102,194,164)","rgb(65,174,118)","rgb(35,139,69)","rgb(0,109,44)","rgb(0,68,27)"],type:"seq"},BuPu:{3:["rgb(224,236,244)","rgb(158,188,218)","rgb(136,86,167)"],4:["rgb(237,248,251)","rgb(179,205,227)","rgb(140,150,198)","rgb(136,65,157)"],5:["rgb(237,248,251)","rgb(179,205,227)","rgb(140,150,198)","rgb(136,86,167)","rgb(129,15,124)"],6:["rgb(237,248,251)","rgb(191,211,230)","rgb(158,188,218)","rgb(140,150,198)","rgb(136,86,167)","rgb(129,15,124)"],7:["rgb(237,248,251)","rgb(191,211,230)","rgb(158,188,218)","rgb(140,150,198)","rgb(140,107,177)","rgb(136,65,157)","rgb(110,1,107)"],8:["rgb(247,252,253)","rgb(224,236,244)","rgb(191,211,230)","rgb(158,188,218)","rgb(140,150,198)","rgb(140,107,177)","rgb(136,65,157)","rgb(110,1,107)"],9:["rgb(247,252,253)","rgb(224,236,244)","rgb(191,211,230)","rgb(158,188,218)","rgb(140,150,198)","rgb(140,107,177)","rgb(136,65,157)","rgb(129,15,124)","rgb(77,0,75)"],type:"seq"},Dark2:{3:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)"],4:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)"],5:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)"],6:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)","rgb(230,171,2)"],7:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)","rgb(230,171,2)","rgb(166,118,29)"],8:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)","rgb(230,171,2)","rgb(166,118,29)","rgb(102,102,102)"],type:"qual"},GnBu:{3:["rgb(224,243,219)","rgb(168,221,181)","rgb(67,162,202)"],4:["rgb(240,249,232)","rgb(186,228,188)","rgb(123,204,196)","rgb(43,140,190)"],5:["rgb(240,249,232)","rgb(186,228,188)","rgb(123,204,196)","rgb(67,162,202)","rgb(8,104,172)"],6:["rgb(240,249,232)","rgb(204,235,197)","rgb(168,221,181)","rgb(123,204,196)","rgb(67,162,202)","rgb(8,104,172)"],7:["rgb(240,249,232)","rgb(204,235,197)","rgb(168,221,181)","rgb(123,204,196)","rgb(78,179,211)","rgb(43,140,190)","rgb(8,88,158)"],8:["rgb(247,252,240)","rgb(224,243,219)","rgb(204,235,197)","rgb(168,221,181)","rgb(123,204,196)","rgb(78,179,211)","rgb(43,140,190)","rgb(8,88,158)"],9:["rgb(247,252,240)","rgb(224,243,219)","rgb(204,235,197)","rgb(168,221,181)","rgb(123,204,196)","rgb(78,179,211)","rgb(43,140,190)","rgb(8,104,172)","rgb(8,64,129)"],type:"seq"},Greens:{3:["rgb(229,245,224)","rgb(161,217,155)","rgb(49,163,84)"],4:["rgb(237,248,233)","rgb(186,228,179)","rgb(116,196,118)","rgb(35,139,69)"],5:["rgb(237,248,233)","rgb(186,228,179)","rgb(116,196,118)","rgb(49,163,84)","rgb(0,109,44)"],6:["rgb(237,248,233)","rgb(199,233,192)","rgb(161,217,155)","rgb(116,196,118)","rgb(49,163,84)","rgb(0,109,44)"],7:["rgb(237,248,233)","rgb(199,233,192)","rgb(161,217,155)","rgb(116,196,118)","rgb(65,171,93)","rgb(35,139,69)","rgb(0,90,50)"],8:["rgb(247,252,245)","rgb(229,245,224)","rgb(199,233,192)","rgb(161,217,155)","rgb(116,196,118)","rgb(65,171,93)","rgb(35,139,69)","rgb(0,90,50)"],9:["rgb(247,252,245)","rgb(229,245,224)","rgb(199,233,192)","rgb(161,217,155)","rgb(116,196,118)","rgb(65,171,93)","rgb(35,139,69)","rgb(0,109,44)","rgb(0,68,27)"],type:"seq"},Greys:{3:["rgb(240,240,240)","rgb(189,189,189)","rgb(99,99,99)"],4:["rgb(247,247,247)","rgb(204,204,204)","rgb(150,150,150)","rgb(82,82,82)"],5:["rgb(247,247,247)","rgb(204,204,204)","rgb(150,150,150)","rgb(99,99,99)","rgb(37,37,37)"],6:["rgb(247,247,247)","rgb(217,217,217)","rgb(189,189,189)","rgb(150,150,150)","rgb(99,99,99)","rgb(37,37,37)"],7:["rgb(247,247,247)","rgb(217,217,217)","rgb(189,189,189)","rgb(150,150,150)","rgb(115,115,115)","rgb(82,82,82)","rgb(37,37,37)"],8:["rgb(255,255,255)","rgb(240,240,240)","rgb(217,217,217)","rgb(189,189,189)","rgb(150,150,150)","rgb(115,115,115)","rgb(82,82,82)","rgb(37,37,37)"],9:["rgb(255,255,255)","rgb(240,240,240)","rgb(217,217,217)","rgb(189,189,189)","rgb(150,150,150)","rgb(115,115,115)","rgb(82,82,82)","rgb(37,37,37)","rgb(0,0,0)"],type:"seq"},OrRd:{3:["rgb(254,232,200)","rgb(253,187,132)","rgb(227,74,51)"],4:["rgb(254,240,217)","rgb(253,204,138)","rgb(252,141,89)","rgb(215,48,31)"],5:["rgb(254,240,217)","rgb(253,204,138)","rgb(252,141,89)","rgb(227,74,51)","rgb(179,0,0)"],6:["rgb(254,240,217)","rgb(253,212,158)","rgb(253,187,132)","rgb(252,141,89)","rgb(227,74,51)","rgb(179,0,0)"],7:["rgb(254,240,217)","rgb(253,212,158)","rgb(253,187,132)","rgb(252,141,89)","rgb(239,101,72)","rgb(215,48,31)","rgb(153,0,0)"],8:["rgb(255,247,236)","rgb(254,232,200)","rgb(253,212,158)","rgb(253,187,132)","rgb(252,141,89)","rgb(239,101,72)","rgb(215,48,31)","rgb(153,0,0)"],9:["rgb(255,247,236)","rgb(254,232,200)","rgb(253,212,158)","rgb(253,187,132)","rgb(252,141,89)","rgb(239,101,72)","rgb(215,48,31)","rgb(179,0,0)","rgb(127,0,0)"],type:"seq"},Oranges:{3:["rgb(254,230,206)","rgb(253,174,107)","rgb(230,85,13)"],4:["rgb(254,237,222)","rgb(253,190,133)","rgb(253,141,60)","rgb(217,71,1)"],5:["rgb(254,237,222)","rgb(253,190,133)","rgb(253,141,60)","rgb(230,85,13)","rgb(166,54,3)"],6:["rgb(254,237,222)","rgb(253,208,162)","rgb(253,174,107)","rgb(253,141,60)","rgb(230,85,13)","rgb(166,54,3)"],7:["rgb(254,237,222)","rgb(253,208,162)","rgb(253,174,107)","rgb(253,141,60)","rgb(241,105,19)","rgb(217,72,1)","rgb(140,45,4)"],8:["rgb(255,245,235)","rgb(254,230,206)","rgb(253,208,162)","rgb(253,174,107)","rgb(253,141,60)","rgb(241,105,19)","rgb(217,72,1)","rgb(140,45,4)"],9:["rgb(255,245,235)","rgb(254,230,206)","rgb(253,208,162)","rgb(253,174,107)","rgb(253,141,60)","rgb(241,105,19)","rgb(217,72,1)","rgb(166,54,3)","rgb(127,39,4)"],type:"seq"},PRGn:{10:["rgb(64,0,75)","rgb(118,42,131)","rgb(153,112,171)","rgb(194,165,207)","rgb(231,212,232)","rgb(217,240,211)","rgb(166,219,160)","rgb(90,174,97)","rgb(27,120,55)","rgb(0,68,27)"],11:["rgb(64,0,75)","rgb(118,42,131)","rgb(153,112,171)","rgb(194,165,207)","rgb(231,212,232)","rgb(247,247,247)","rgb(217,240,211)","rgb(166,219,160)","rgb(90,174,97)","rgb(27,120,55)","rgb(0,68,27)"],3:["rgb(175,141,195)","rgb(247,247,247)","rgb(127,191,123)"],4:["rgb(123,50,148)","rgb(194,165,207)","rgb(166,219,160)","rgb(0,136,55)"],5:["rgb(123,50,148)","rgb(194,165,207)","rgb(247,247,247)","rgb(166,219,160)","rgb(0,136,55)"],6:["rgb(118,42,131)","rgb(175,141,195)","rgb(231,212,232)","rgb(217,240,211)","rgb(127,191,123)","rgb(27,120,55)"],7:["rgb(118,42,131)","rgb(175,141,195)","rgb(231,212,232)","rgb(247,247,247)","rgb(217,240,211)","rgb(127,191,123)","rgb(27,120,55)"],8:["rgb(118,42,131)","rgb(153,112,171)","rgb(194,165,207)","rgb(231,212,232)","rgb(217,240,211)","rgb(166,219,160)","rgb(90,174,97)","rgb(27,120,55)"],9:["rgb(118,42,131)","rgb(153,112,171)","rgb(194,165,207)","rgb(231,212,232)","rgb(247,247,247)","rgb(217,240,211)","rgb(166,219,160)","rgb(90,174,97)","rgb(27,120,55)"],type:"div"},Paired:{10:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)","rgb(202,178,214)","rgb(106,61,154)"],11:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)","rgb(202,178,214)","rgb(106,61,154)","rgb(255,255,153)"],12:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)","rgb(202,178,214)","rgb(106,61,154)","rgb(255,255,153)","rgb(177,89,40)"],3:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)"],4:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)"],5:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)"],6:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)"],7:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)"],8:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)"],9:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)","rgb(202,178,214)"],type:"qual"},Pastel1:{3:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)"],4:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)"],5:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)"],6:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)"],7:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)","rgb(229,216,189)"],8:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)","rgb(229,216,189)","rgb(253,218,236)"],9:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)","rgb(229,216,189)","rgb(253,218,236)","rgb(242,242,242)"],type:"qual"},Pastel2:{3:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)"],4:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)"],5:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)"],6:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)"],7:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)","rgb(241,226,204)"],8:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)","rgb(241,226,204)","rgb(204,204,204)"],type:"qual"},PiYG:{10:["rgb(142,1,82)","rgb(197,27,125)","rgb(222,119,174)","rgb(241,182,218)","rgb(253,224,239)","rgb(230,245,208)","rgb(184,225,134)","rgb(127,188,65)","rgb(77,146,33)","rgb(39,100,25)"],11:["rgb(142,1,82)","rgb(197,27,125)","rgb(222,119,174)","rgb(241,182,218)","rgb(253,224,239)","rgb(247,247,247)","rgb(230,245,208)","rgb(184,225,134)","rgb(127,188,65)","rgb(77,146,33)","rgb(39,100,25)"],3:["rgb(233,163,201)","rgb(247,247,247)","rgb(161,215,106)"],4:["rgb(208,28,139)","rgb(241,182,218)","rgb(184,225,134)","rgb(77,172,38)"],5:["rgb(208,28,139)","rgb(241,182,218)","rgb(247,247,247)","rgb(184,225,134)","rgb(77,172,38)"],6:["rgb(197,27,125)","rgb(233,163,201)","rgb(253,224,239)","rgb(230,245,208)","rgb(161,215,106)","rgb(77,146,33)"],7:["rgb(197,27,125)","rgb(233,163,201)","rgb(253,224,239)","rgb(247,247,247)","rgb(230,245,208)","rgb(161,215,106)","rgb(77,146,33)"],8:["rgb(197,27,125)","rgb(222,119,174)","rgb(241,182,218)","rgb(253,224,239)","rgb(230,245,208)","rgb(184,225,134)","rgb(127,188,65)","rgb(77,146,33)"],9:["rgb(197,27,125)","rgb(222,119,174)","rgb(241,182,218)","rgb(253,224,239)","rgb(247,247,247)","rgb(230,245,208)","rgb(184,225,134)","rgb(127,188,65)","rgb(77,146,33)"],type:"div"},PuBu:{3:["rgb(236,231,242)","rgb(166,189,219)","rgb(43,140,190)"],4:["rgb(241,238,246)","rgb(189,201,225)","rgb(116,169,207)","rgb(5,112,176)"],5:["rgb(241,238,246)","rgb(189,201,225)","rgb(116,169,207)","rgb(43,140,190)","rgb(4,90,141)"],6:["rgb(241,238,246)","rgb(208,209,230)","rgb(166,189,219)","rgb(116,169,207)","rgb(43,140,190)","rgb(4,90,141)"],7:["rgb(241,238,246)","rgb(208,209,230)","rgb(166,189,219)","rgb(116,169,207)","rgb(54,144,192)","rgb(5,112,176)","rgb(3,78,123)"],8:["rgb(255,247,251)","rgb(236,231,242)","rgb(208,209,230)","rgb(166,189,219)","rgb(116,169,207)","rgb(54,144,192)","rgb(5,112,176)","rgb(3,78,123)"],9:["rgb(255,247,251)","rgb(236,231,242)","rgb(208,209,230)","rgb(166,189,219)","rgb(116,169,207)","rgb(54,144,192)","rgb(5,112,176)","rgb(4,90,141)","rgb(2,56,88)"],type:"seq"},PuBuGn:{3:["rgb(236,226,240)","rgb(166,189,219)","rgb(28,144,153)"],4:["rgb(246,239,247)","rgb(189,201,225)","rgb(103,169,207)","rgb(2,129,138)"],5:["rgb(246,239,247)","rgb(189,201,225)","rgb(103,169,207)","rgb(28,144,153)","rgb(1,108,89)"],6:["rgb(246,239,247)","rgb(208,209,230)","rgb(166,189,219)","rgb(103,169,207)","rgb(28,144,153)","rgb(1,108,89)"],7:["rgb(246,239,247)","rgb(208,209,230)","rgb(166,189,219)","rgb(103,169,207)","rgb(54,144,192)","rgb(2,129,138)","rgb(1,100,80)"],8:["rgb(255,247,251)","rgb(236,226,240)","rgb(208,209,230)","rgb(166,189,219)","rgb(103,169,207)","rgb(54,144,192)","rgb(2,129,138)","rgb(1,100,80)"],9:["rgb(255,247,251)","rgb(236,226,240)","rgb(208,209,230)","rgb(166,189,219)","rgb(103,169,207)","rgb(54,144,192)","rgb(2,129,138)","rgb(1,108,89)","rgb(1,70,54)"],type:"seq"},PuOr:{10:["rgb(127,59,8)","rgb(179,88,6)","rgb(224,130,20)","rgb(253,184,99)","rgb(254,224,182)","rgb(216,218,235)","rgb(178,171,210)","rgb(128,115,172)","rgb(84,39,136)","rgb(45,0,75)"],11:["rgb(127,59,8)","rgb(179,88,6)","rgb(224,130,20)","rgb(253,184,99)","rgb(254,224,182)","rgb(247,247,247)","rgb(216,218,235)","rgb(178,171,210)","rgb(128,115,172)","rgb(84,39,136)","rgb(45,0,75)"],3:["rgb(241,163,64)","rgb(247,247,247)","rgb(153,142,195)"],4:["rgb(230,97,1)","rgb(253,184,99)","rgb(178,171,210)","rgb(94,60,153)"],5:["rgb(230,97,1)","rgb(253,184,99)","rgb(247,247,247)","rgb(178,171,210)","rgb(94,60,153)"],6:["rgb(179,88,6)","rgb(241,163,64)","rgb(254,224,182)","rgb(216,218,235)","rgb(153,142,195)","rgb(84,39,136)"],7:["rgb(179,88,6)","rgb(241,163,64)","rgb(254,224,182)","rgb(247,247,247)","rgb(216,218,235)","rgb(153,142,195)","rgb(84,39,136)"],8:["rgb(179,88,6)","rgb(224,130,20)","rgb(253,184,99)","rgb(254,224,182)","rgb(216,218,235)","rgb(178,171,210)","rgb(128,115,172)","rgb(84,39,136)"],9:["rgb(179,88,6)","rgb(224,130,20)","rgb(253,184,99)","rgb(254,224,182)","rgb(247,247,247)","rgb(216,218,235)","rgb(178,171,210)","rgb(128,115,172)","rgb(84,39,136)"],type:"div"},PuRd:{3:["rgb(231,225,239)","rgb(201,148,199)","rgb(221,28,119)"],4:["rgb(241,238,246)","rgb(215,181,216)","rgb(223,101,176)","rgb(206,18,86)"],5:["rgb(241,238,246)","rgb(215,181,216)","rgb(223,101,176)","rgb(221,28,119)","rgb(152,0,67)"],6:["rgb(241,238,246)","rgb(212,185,218)","rgb(201,148,199)","rgb(223,101,176)","rgb(221,28,119)","rgb(152,0,67)"],7:["rgb(241,238,246)","rgb(212,185,218)","rgb(201,148,199)","rgb(223,101,176)","rgb(231,41,138)","rgb(206,18,86)","rgb(145,0,63)"],8:["rgb(247,244,249)","rgb(231,225,239)","rgb(212,185,218)","rgb(201,148,199)","rgb(223,101,176)","rgb(231,41,138)","rgb(206,18,86)","rgb(145,0,63)"],9:["rgb(247,244,249)","rgb(231,225,239)","rgb(212,185,218)","rgb(201,148,199)","rgb(223,101,176)","rgb(231,41,138)","rgb(206,18,86)","rgb(152,0,67)","rgb(103,0,31)"],type:"seq"},Purples:{3:["rgb(239,237,245)","rgb(188,189,220)","rgb(117,107,177)"],4:["rgb(242,240,247)","rgb(203,201,226)","rgb(158,154,200)","rgb(106,81,163)"],5:["rgb(242,240,247)","rgb(203,201,226)","rgb(158,154,200)","rgb(117,107,177)","rgb(84,39,143)"],6:["rgb(242,240,247)","rgb(218,218,235)","rgb(188,189,220)","rgb(158,154,200)","rgb(117,107,177)","rgb(84,39,143)"],7:["rgb(242,240,247)","rgb(218,218,235)","rgb(188,189,220)","rgb(158,154,200)","rgb(128,125,186)","rgb(106,81,163)","rgb(74,20,134)"],8:["rgb(252,251,253)","rgb(239,237,245)","rgb(218,218,235)","rgb(188,189,220)","rgb(158,154,200)","rgb(128,125,186)","rgb(106,81,163)","rgb(74,20,134)"],9:["rgb(252,251,253)","rgb(239,237,245)","rgb(218,218,235)","rgb(188,189,220)","rgb(158,154,200)","rgb(128,125,186)","rgb(106,81,163)","rgb(84,39,143)","rgb(63,0,125)"],type:"seq"},RdBu:{10:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],11:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],3:["rgb(239,138,98)","rgb(247,247,247)","rgb(103,169,207)"],4:["rgb(202,0,32)","rgb(244,165,130)","rgb(146,197,222)","rgb(5,113,176)"],5:["rgb(202,0,32)","rgb(244,165,130)","rgb(247,247,247)","rgb(146,197,222)","rgb(5,113,176)"],6:["rgb(178,24,43)","rgb(239,138,98)","rgb(253,219,199)","rgb(209,229,240)","rgb(103,169,207)","rgb(33,102,172)"],7:["rgb(178,24,43)","rgb(239,138,98)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(103,169,207)","rgb(33,102,172)"],8:["rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)"],9:["rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)"],type:"div"},RdGy:{10:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(224,224,224)","rgb(186,186,186)","rgb(135,135,135)","rgb(77,77,77)","rgb(26,26,26)"],11:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(255,255,255)","rgb(224,224,224)","rgb(186,186,186)","rgb(135,135,135)","rgb(77,77,77)","rgb(26,26,26)"],3:["rgb(239,138,98)","rgb(255,255,255)","rgb(153,153,153)"],4:["rgb(202,0,32)","rgb(244,165,130)","rgb(186,186,186)","rgb(64,64,64)"],5:["rgb(202,0,32)","rgb(244,165,130)","rgb(255,255,255)","rgb(186,186,186)","rgb(64,64,64)"],6:["rgb(178,24,43)","rgb(239,138,98)","rgb(253,219,199)","rgb(224,224,224)","rgb(153,153,153)","rgb(77,77,77)"],7:["rgb(178,24,43)","rgb(239,138,98)","rgb(253,219,199)","rgb(255,255,255)","rgb(224,224,224)","rgb(153,153,153)","rgb(77,77,77)"],8:["rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(224,224,224)","rgb(186,186,186)","rgb(135,135,135)","rgb(77,77,77)"],9:["rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(255,255,255)","rgb(224,224,224)","rgb(186,186,186)","rgb(135,135,135)","rgb(77,77,77)"],type:"div"},RdPu:{3:["rgb(253,224,221)","rgb(250,159,181)","rgb(197,27,138)"],4:["rgb(254,235,226)","rgb(251,180,185)","rgb(247,104,161)","rgb(174,1,126)"],5:["rgb(254,235,226)","rgb(251,180,185)","rgb(247,104,161)","rgb(197,27,138)","rgb(122,1,119)"],6:["rgb(254,235,226)","rgb(252,197,192)","rgb(250,159,181)","rgb(247,104,161)","rgb(197,27,138)","rgb(122,1,119)"],7:["rgb(254,235,226)","rgb(252,197,192)","rgb(250,159,181)","rgb(247,104,161)","rgb(221,52,151)","rgb(174,1,126)","rgb(122,1,119)"],8:["rgb(255,247,243)","rgb(253,224,221)","rgb(252,197,192)","rgb(250,159,181)","rgb(247,104,161)","rgb(221,52,151)","rgb(174,1,126)","rgb(122,1,119)"],9:["rgb(255,247,243)","rgb(253,224,221)","rgb(252,197,192)","rgb(250,159,181)","rgb(247,104,161)","rgb(221,52,151)","rgb(174,1,126)","rgb(122,1,119)","rgb(73,0,106)"],type:"seq"},RdYlBu:{10:["rgb(165,0,38)","rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,144)","rgb(224,243,248)","rgb(171,217,233)","rgb(116,173,209)","rgb(69,117,180)","rgb(49,54,149)"],11:["rgb(165,0,38)","rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,144)","rgb(255,255,191)","rgb(224,243,248)","rgb(171,217,233)","rgb(116,173,209)","rgb(69,117,180)","rgb(49,54,149)"],3:["rgb(252,141,89)","rgb(255,255,191)","rgb(145,191,219)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(171,217,233)","rgb(44,123,182)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(171,217,233)","rgb(44,123,182)"],6:["rgb(215,48,39)","rgb(252,141,89)","rgb(254,224,144)","rgb(224,243,248)","rgb(145,191,219)","rgb(69,117,180)"],7:["rgb(215,48,39)","rgb(252,141,89)","rgb(254,224,144)","rgb(255,255,191)","rgb(224,243,248)","rgb(145,191,219)","rgb(69,117,180)"],8:["rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,144)","rgb(224,243,248)","rgb(171,217,233)","rgb(116,173,209)","rgb(69,117,180)"],9:["rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,144)","rgb(255,255,191)","rgb(224,243,248)","rgb(171,217,233)","rgb(116,173,209)","rgb(69,117,180)"],type:"div"},RdYlGn:{10:["rgb(165,0,38)","rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(217,239,139)","rgb(166,217,106)","rgb(102,189,99)","rgb(26,152,80)","rgb(0,104,55)"],11:["rgb(165,0,38)","rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(255,255,191)","rgb(217,239,139)","rgb(166,217,106)","rgb(102,189,99)","rgb(26,152,80)","rgb(0,104,55)"],3:["rgb(252,141,89)","rgb(255,255,191)","rgb(145,207,96)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(166,217,106)","rgb(26,150,65)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(166,217,106)","rgb(26,150,65)"],6:["rgb(215,48,39)","rgb(252,141,89)","rgb(254,224,139)","rgb(217,239,139)","rgb(145,207,96)","rgb(26,152,80)"],7:["rgb(215,48,39)","rgb(252,141,89)","rgb(254,224,139)","rgb(255,255,191)","rgb(217,239,139)","rgb(145,207,96)","rgb(26,152,80)"],8:["rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(217,239,139)","rgb(166,217,106)","rgb(102,189,99)","rgb(26,152,80)"],9:["rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(255,255,191)","rgb(217,239,139)","rgb(166,217,106)","rgb(102,189,99)","rgb(26,152,80)"],type:"div"},Reds:{3:["rgb(254,224,210)","rgb(252,146,114)","rgb(222,45,38)"],4:["rgb(254,229,217)","rgb(252,174,145)","rgb(251,106,74)","rgb(203,24,29)"],5:["rgb(254,229,217)","rgb(252,174,145)","rgb(251,106,74)","rgb(222,45,38)","rgb(165,15,21)"],6:["rgb(254,229,217)","rgb(252,187,161)","rgb(252,146,114)","rgb(251,106,74)","rgb(222,45,38)","rgb(165,15,21)"],7:["rgb(254,229,217)","rgb(252,187,161)","rgb(252,146,114)","rgb(251,106,74)","rgb(239,59,44)","rgb(203,24,29)","rgb(153,0,13)"],8:["rgb(255,245,240)","rgb(254,224,210)","rgb(252,187,161)","rgb(252,146,114)","rgb(251,106,74)","rgb(239,59,44)","rgb(203,24,29)","rgb(153,0,13)"],9:["rgb(255,245,240)","rgb(254,224,210)","rgb(252,187,161)","rgb(252,146,114)","rgb(251,106,74)","rgb(239,59,44)","rgb(203,24,29)","rgb(165,15,21)","rgb(103,0,13)"],type:"seq"},Set1:{3:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)"],4:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)"],5:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)"],6:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)","rgb(255,255,51)"],7:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)","rgb(255,255,51)","rgb(166,86,40)"],8:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)","rgb(255,255,51)","rgb(166,86,40)","rgb(247,129,191)"],9:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)","rgb(255,255,51)","rgb(166,86,40)","rgb(247,129,191)","rgb(153,153,153)"],type:"qual"},Set2:{3:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)"],4:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)"],5:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)"],6:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)","rgb(255,217,47)"],7:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)","rgb(255,217,47)","rgb(229,196,148)"],8:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)","rgb(255,217,47)","rgb(229,196,148)","rgb(179,179,179)"],type:"qual"},Set3:{10:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)"],11:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)","rgb(204,235,197)"],12:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)","rgb(204,235,197)","rgb(255,237,111)"],3:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)"],4:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)"],5:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)"],6:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)"],7:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)"],8:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)"],9:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)"],type:"qual"},Spectral:{10:["rgb(158,1,66)","rgb(213,62,79)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(230,245,152)","rgb(171,221,164)","rgb(102,194,165)","rgb(50,136,189)","rgb(94,79,162)"],11:["rgb(158,1,66)","rgb(213,62,79)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(255,255,191)","rgb(230,245,152)","rgb(171,221,164)","rgb(102,194,165)","rgb(50,136,189)","rgb(94,79,162)"],3:["rgb(252,141,89)","rgb(255,255,191)","rgb(153,213,148)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(171,221,164)","rgb(43,131,186)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(171,221,164)","rgb(43,131,186)"],6:["rgb(213,62,79)","rgb(252,141,89)","rgb(254,224,139)","rgb(230,245,152)","rgb(153,213,148)","rgb(50,136,189)"],7:["rgb(213,62,79)","rgb(252,141,89)","rgb(254,224,139)","rgb(255,255,191)","rgb(230,245,152)","rgb(153,213,148)","rgb(50,136,189)"],8:["rgb(213,62,79)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(230,245,152)","rgb(171,221,164)","rgb(102,194,165)","rgb(50,136,189)"],9:["rgb(213,62,79)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(255,255,191)","rgb(230,245,152)","rgb(171,221,164)","rgb(102,194,165)","rgb(50,136,189)"],type:"div"},YlGn:{3:["rgb(247,252,185)","rgb(173,221,142)","rgb(49,163,84)"],4:["rgb(255,255,204)","rgb(194,230,153)","rgb(120,198,121)","rgb(35,132,67)"],5:["rgb(255,255,204)","rgb(194,230,153)","rgb(120,198,121)","rgb(49,163,84)","rgb(0,104,55)"],6:["rgb(255,255,204)","rgb(217,240,163)","rgb(173,221,142)","rgb(120,198,121)","rgb(49,163,84)","rgb(0,104,55)"],7:["rgb(255,255,204)","rgb(217,240,163)","rgb(173,221,142)","rgb(120,198,121)","rgb(65,171,93)","rgb(35,132,67)","rgb(0,90,50)"],8:["rgb(255,255,229)","rgb(247,252,185)","rgb(217,240,163)","rgb(173,221,142)","rgb(120,198,121)","rgb(65,171,93)","rgb(35,132,67)","rgb(0,90,50)"],9:["rgb(255,255,229)","rgb(247,252,185)","rgb(217,240,163)","rgb(173,221,142)","rgb(120,198,121)","rgb(65,171,93)","rgb(35,132,67)","rgb(0,104,55)","rgb(0,69,41)"],type:"seq"},YlGnBu:{3:["rgb(237,248,177)","rgb(127,205,187)","rgb(44,127,184)"],4:["rgb(255,255,204)","rgb(161,218,180)","rgb(65,182,196)","rgb(34,94,168)"],5:["rgb(255,255,204)","rgb(161,218,180)","rgb(65,182,196)","rgb(44,127,184)","rgb(37,52,148)"],6:["rgb(255,255,204)","rgb(199,233,180)","rgb(127,205,187)","rgb(65,182,196)","rgb(44,127,184)","rgb(37,52,148)"],7:["rgb(255,255,204)","rgb(199,233,180)","rgb(127,205,187)","rgb(65,182,196)","rgb(29,145,192)","rgb(34,94,168)","rgb(12,44,132)"],8:["rgb(255,255,217)","rgb(237,248,177)","rgb(199,233,180)","rgb(127,205,187)","rgb(65,182,196)","rgb(29,145,192)","rgb(34,94,168)","rgb(12,44,132)"],9:["rgb(255,255,217)","rgb(237,248,177)","rgb(199,233,180)","rgb(127,205,187)","rgb(65,182,196)","rgb(29,145,192)","rgb(34,94,168)","rgb(37,52,148)","rgb(8,29,88)"],type:"seq"},YlOrBr:{3:["rgb(255,247,188)","rgb(254,196,79)","rgb(217,95,14)"],4:["rgb(255,255,212)","rgb(254,217,142)","rgb(254,153,41)","rgb(204,76,2)"],5:["rgb(255,255,212)","rgb(254,217,142)","rgb(254,153,41)","rgb(217,95,14)","rgb(153,52,4)"],6:["rgb(255,255,212)","rgb(254,227,145)","rgb(254,196,79)","rgb(254,153,41)","rgb(217,95,14)","rgb(153,52,4)"],7:["rgb(255,255,212)","rgb(254,227,145)","rgb(254,196,79)","rgb(254,153,41)","rgb(236,112,20)","rgb(204,76,2)","rgb(140,45,4)"],8:["rgb(255,255,229)","rgb(255,247,188)","rgb(254,227,145)","rgb(254,196,79)","rgb(254,153,41)","rgb(236,112,20)","rgb(204,76,2)","rgb(140,45,4)"],9:["rgb(255,255,229)","rgb(255,247,188)","rgb(254,227,145)","rgb(254,196,79)","rgb(254,153,41)","rgb(236,112,20)","rgb(204,76,2)","rgb(153,52,4)","rgb(102,37,6)"],type:"seq"},YlOrRd:{3:["rgb(255,237,160)","rgb(254,178,76)","rgb(240,59,32)"],4:["rgb(255,255,178)","rgb(254,204,92)","rgb(253,141,60)","rgb(227,26,28)"],5:["rgb(255,255,178)","rgb(254,204,92)","rgb(253,141,60)","rgb(240,59,32)","rgb(189,0,38)"],6:["rgb(255,255,178)","rgb(254,217,118)","rgb(254,178,76)","rgb(253,141,60)","rgb(240,59,32)","rgb(189,0,38)"],7:["rgb(255,255,178)","rgb(254,217,118)","rgb(254,178,76)","rgb(253,141,60)","rgb(252,78,42)","rgb(227,26,28)","rgb(177,0,38)"],8:["rgb(255,255,204)","rgb(255,237,160)","rgb(254,217,118)","rgb(254,178,76)","rgb(253,141,60)","rgb(252,78,42)","rgb(227,26,28)","rgb(177,0,38)"],type:"seq"}},T=function(){function t(t){this._http=t,this.namedPalettes={},this._source=""}return Object.defineProperty(t.prototype,"source",{set:function(t){this._source=t},enumerable:!0,configurable:!0}),t.prototype.getPalette=function(t,e,r){var n=this,i=null;return this.namedPalettes[t]?i=this.namedPalettes[t]:w[t]&&(i=w[t][r||3]),i?e?g.of(i.slice().reverse()):g.of(i.slice()):this._http.get(this._source+"/"+t+".pal",{responseType:"text"}).pipe(p.map((function(t){return n.parseNCWMSPalette(t)})))},t.prototype.parseNCWMSPalette=function(t){return t.split("\n").map((function(t){return t.replace(/\#.*/g,"").trim().replace(/ +/g," ")})).filter((function(t){return t.length})).map((function(t){return"rgb("+t.split(" ").join(",")+")"}))},t.prototype.colourIndex=function(t,e,r,n){var i=(t-e)/(r-e);return Math.round(i*(n-1))},t.ctorParameters=function(){return[{type:i.HttpClient}]},t=y([e.Injectable(),f("design:paramtypes",[i.HttpClient])],t)}();function S(t,e,r){return new Date(Date.UTC(t,e,r))}var x=function(){function t(){this.specialDates={yesterday:function(){var t=new Date;return t.setDate(t.getDate()-1),t}}}return t.prototype.convertDate=function(t){var e;if(t||(t=new Date),"string"==typeof t){var r=t;if(this.specialDates[r])e=this.specialDates[r]();else{var n=v(t.split("-").map((function(t){return+t})),4),i=n[0],o=n[1],a=n[2];n[3];e=S(i,o,a)}}else e=t;return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}},t.prototype.datesEqual=function(t,e){return!(!t||!e)&&(t.year===e.year&&t.month===e.month&&t.day===e.day)},t=y([e.Injectable(),f("design:paramtypes",[])],t)}(),O=function(){function t(t){this.http=t,this.cache={}}return t.prototype.get=function(t,e){var r=""+t.url+e;if(!this.cache[r]){var n=r;n.indexOf("?")<0?n+="?":n+="&",n+="time="+(new Date).getTime(),this.cache[r]=this.http.get(n).pipe(p.publishReplay(),p.refCount())}return this.cache[r]},t.ctorParameters=function(){return[{type:i.HttpClient}]},t=y([e.Injectable(),f("design:paramtypes",[i.HttpClient])],t)}(),M=function(){function t(t){this.http=t}return t.prototype.makeURL=function(t,e){return t.url+"/dodsC/"+e},t.prototype.get=function(t){return this.http.get(t,{responseType:"text"})},t.prototype.getData=function(t,e){return this.get(t).pipe(p.map((function(t){return l.simplify(l.parseData(t,e))})))},t.prototype.getDAS=function(t){return this.get(t+".das").pipe(p.map(l.parseDAS))},t.prototype.getDDX=function(t){return this.get(t+".ddx").pipe(p.map(l.parseDDX))},t.prototype.getExtent=function(t){var e=this;return console.log(t),g.forkJoin([this.getDAS(t),this.getDDX(t)]).pipe(p.switchMap((function(r){var n=v(r,2),i=n[0],o=(n[1],i);return g.forkJoin([e.getData(t+".ascii?latitude",o),e.getData(t+".ascii?longitude",o)])})),p.map((function(t){var e=t[0].latitude,r=t[1].longitude;return[e[0],e[e.length-1],r[0],r[r.length-1]]})))},t.prototype.dapRangeQuery=function(t,e,r){return void 0===e&&(e=t),"["+t+":"+(r=r||1)+":"+e+"]"},t.ctorParameters=function(){return[{type:i.HttpClient}]},t=y([e.Injectable(),f("design:paramtypes",[i.HttpClient])],t)}(),D=["latitude","lat"],L=["longitude","lng","lon"],k=["time","t"],P=function(){function t(t){this.dap=t,this.ddxCache={},this.dasCache={},this.timeCache={}}return t.prototype.identifyCoordinate=function(t){for(var e,r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];try{for(var o=m(n),a=o.next();!a.done;a=o.next()){var s=a.value;if(t.variables[s])return s}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}},t.prototype.getDDX=function(t,e){var r=this.dap.makeURL(t,e);return this.ddxForUrl(r)},t.prototype.ddxForUrl=function(t){return this.ddxCache[t]||(this.ddxCache[t]=this.dap.getDDX(t).pipe(p.publishReplay(),p.refCount())),this.ddxCache[t]},t.prototype.getDDXForLayer=function(t){return this.getDDX(t.flattenedSettings.host,t.interpolatedFile)},t.prototype.getDAS=function(t,e){var r=this.dap.makeURL(t,e);return this.dasForUrl(r)},t.prototype.dasForUrl=function(t){return this.dasCache[t]||(this.dasCache[t]=this.dap.getDAS(t).pipe(p.publishReplay(),p.refCount())),this.dasCache[t]},t.prototype.getDASForLayer=function(t){return this.getDAS(t.flattenedSettings.host,t.interpolatedFile)},t.prototype.getMetadata=function(t){return"tds"!==t.flattenedSettings.host.software?g.of({}):g.forkJoin([this.getDASForLayer(t),this.getDDXForLayer(t)]).pipe(p.map((function(t){return{das:t[0],ddx:t[1]}})),p.map((function(e){return Object.assign({},e.das.attr||{},e.ddx.variables[t.flattenedSettings.layer||t.flattenedSettings.variable]||{})})))},t.prototype.populateMetadata=function(t){this.getMetadata(t).subscribe((function(e){setTimeout((function(){t.retrievedMetadata=e}))}))},t.prototype.getGrid=function(t,e){var r=this.dap.makeURL(t,e);return this.getGridForURL(r)},t.prototype.getGridForURL=function(t){var e=this,r=this.ddxForUrl(t),n=this.dasForUrl(t);return g.forkJoin([r,n]).pipe(p.map((function(r){var n=r[0],i=r[1],o=e.identifyCoordinate.apply(e,I([n],D)),a=e.identifyCoordinate.apply(e,I([n],L)),s=e.dap.getData(t+".ascii?"+o,i).pipe(p.map((function(t){return t[o]}))),l=e.dap.getData(t+".ascii?"+a,i).pipe(p.map((function(t){return t[a]})));return g.forkJoin(s,l)})),p.switchAll(),p.publishReplay(),p.refCount())},t.prototype.getGridForLayer=function(t){return this.getGrid(t.flattenedSettings.host,t.interpolatedFile)},t.prototype.getSpatialExtent=function(t){return this.getGridForLayer(t).pipe(p.map((function(t){var e=v(t,2),r=e[0],n=e[1];return{east:Math.max.apply(Math,I(n)),west:Math.min.apply(Math,I(n)),north:Math.max.apply(Math,I(r)),south:Math.min.apply(Math,I(r))}}))).pipe(p.publishReplay(),p.refCount())},t.prototype.getTimeDimension=function(t,e){var r=this.dap.makeURL(t,e);return this.getTimeDimensionForURL(r)},t.prototype.getTimeDimensionForURL=function(t){var e=this;if(!this.timeCache[t]){var r=this.ddxForUrl(t),n=this.dasForUrl(t),i=g.forkJoin([r,n]).pipe(p.map((function(r){var n=r[0],i=r[1],o=e.identifyCoordinate.apply(e,I([n],k));return e.dap.getData(t+".ascii?"+o,i).pipe(p.map((function(t){return t[o]})))})),p.switchAll(),p.shareReplay());this.timeCache[t]=i}return this.timeCache[t]},t.ctorParameters=function(){return[{type:M}]},t=y([e.Injectable(),f("design:paramtypes",[M])],t)}(),j=function(){function t(t,e){this.metadata=t,this.dap=e}return t.prototype.getTimeseries=function(t,e,r,n,i,o){var a=this;i=i||{};var s=this.dap.makeURL(t,e),l=this.metadata.ddxForUrl(s),b=this.metadata.dasForUrl(s);r=r;return g.forkJoin(l,b,this.metadata.getGrid(t,e)).pipe(p.switchMap((function(t){var e=v(t,3),g=e[0],p=e[1],l=e[2],b=l[0],c=l[1],u=a.indexInDimension(n.lat,b),d=a.indexInDimension(n.lng,c);void 0===o&&(o=+g.variables[r]._FillValue);var h=a.makeTimeQuery(g,r,u,d,i);return a.dap.getData(s+".ascii?"+r+h,p)})),p.map((function(t){var e=t[r];return e.length||(e=[t[r]]),{dates:t.time||t.t,values:e.map((function(t){return t===o?NaN:t}))}})))},t.prototype.getTimeseriesForLayer=function(t,e){return this.getTimeseries(t.flattenedSettings.host,t.interpolatedFile,t.flattenedSettings.layer||t.flattenedSettings.variable,e,null,t.flattenedSettings.fillValue)},t.prototype.makeTimeQuery=function(t,e,r,n,i){var o=this,a=t.variables[e],s="";return a.dimensions.forEach((function(t){var e=t.name.toLowerCase();k.indexOf(e)>=0?s+=o.dapRangeQuery(0,+t.size-1):D.indexOf(e)>=0?s+=o.dapRangeQuery(r):L.indexOf(e)>=0?s+=o.dapRangeQuery(n):s+=o.dapRangeQuery(i[e]||0)})),s},t.prototype.dapRangeQuery=function(t,e,r){return void 0===e&&(e=t),"["+t+":"+(r=r||1)+":"+e+"]"},t.prototype.indexInDimension=function(t,e,r){var n=0,i=e.length-1;r&&(i-=r);var o,a=e[0]>e[e.length-1];for(a&&(n=i,i=0);n<=i||a&&i<=n;){if(t<=e[n])return n;if(t>=e[i])return i;o=Math.floor((n+i)/2);var s=Math.abs(e[o]-t),g=Math.abs(e[o+1]-t);a?g<=s?i=o+1:n=o:g<=s?n=o+1:i=o}return o},t.ctorParameters=function(){return[{type:P},{type:M}]},t=y([e.Injectable(),f("design:paramtypes",[P,M])],t)}(),E=function(){function t(){}return t.isDefined=function(t){return null!=t},t.interpolate=function(e,r){return"string"==typeof e&&r?e.replace(t.templateMatcher,(function(e,n){var i=t.getValue(r,n);return t.isDefined(i)?i:e})):e},t.getValue=function(e,r){var n=r.split(".");r="";do{r+=n.shift(),!t.isDefined(e)||!t.isDefined(e[r])||"object"!=typeof e[r]&&n.length?n.length?r+=".":e=void 0:(e=e[r],r="")}while(n.length);return e},t.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g,t}(),R=function(){function t(t){this.meta=t,this.latestPointSelectionSource=new g.BehaviorSubject(null),this.latestPointSelection=this.latestPointSelectionSource.asObservable()}return t.prototype.unchanged=function(t,e){return!t&&!e||!(!t||!e)&&(t.variable===e.variable&&(!!Object.keys(t.tags).every((function(r){return t.tags[r]===e.tags[r]}))&&(t.catalog.url===e.catalog.url&&t.feature===e.feature)))},t.prototype.pointSelection=function(t){var e=this.latestPointSelectionSource.getValue();if(!this.unchanged(e,t)){var r=this.fullUrl(t);this.validUrl(r)&&t.variable&&this.latestPointSelectionSource.next(t)}},t.prototype.fullUrl=function(t){var e=Object.assign({},t.feature?t.feature.properties:{},t.tags);return E.interpolate(t.catalog.url,e)},t.prototype.validUrl=function(t){return t.indexOf("{{")<0},t.prototype.timeseriesVariables=function(t){var e=t.catalog.coordinates||{},r=this.fullUrl(t);return this.validUrl(r)?this.meta.ddxForUrl(r).pipe(p.map((function(r){var n=r.variables;return Object.keys(n).filter((function(t){var n=r.variables[t].dimensions;return Object.keys(e).every((function(t){return n.find((function(e){return e.name===t}))}))})).map((function(e){if(t.catalog&&t.catalog.displayFormat){var n=Object.assign({variable:e},r.variables[e]);return{value:e,label:E.interpolate(t.catalog.displayFormat,n)}}return r.variables[e].long_name?{value:e,label:r.variables[e].long_name}:{value:e,label:e}}))}))):g.of([])},t.ctorParameters=function(){return[{type:P}]},t=y([e.Injectable(),f("design:paramtypes",[P])],t)}(),_=function(){function t(t){this.metadata=t}return t.prototype.fnForYear=function(t,e){var r=t.layer.publications[t.options.publication];return E.interpolate(r.options.filepath,{year:e})},t.prototype.availableDates=function(t,e){var r=t.layer,n=this.fnForYear(t,e),i=this.metadata.getTimeDimension(r.options.host,n);if(!r.timeshift)return i;if(r.timePeriod.containsYear(e-1)){n=this.fnForYear(t,e-1);var o=this.metadata.getTimeDimension(r.host,n);i=g.forkJoin.apply(void 0,I([o,i])).pipe(p.map((function(t){return t[0].concat(t[1])})))}return i.pipe(p.map((function(t){return t.map((function(t){var e=new Date(t.getTime());return e.setUTCDate(t.getUTCDate()-r.timeshift*r.timestep),e}))})),p.map((function(t){return t.filter((function(t,n){return n>=Math.abs(r.timeshift)&&t.getUTCFullYear()===e}))})))},t.ctorParameters=function(){return[{type:P}]},t=y([e.Injectable(),f("design:paramtypes",[P])],t)}(),F={host:"namedHosts",interval:"namedIntervals"};function A(t){return JSON.parse(JSON.stringify(t))}function N(t,e,r){var n,i;try{for(var o=m(t),a=o.next();!a.done;a=o.next()){var s=a.value;if(e[s]&&r[s])return e[s]===r[s]}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return!1}function V(t,e,r){t.options=Object.assign({},e.options||{},t.options||{}),r||(t.publications=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(!e.length)return[];for(var n=A(e[0]).map((function(t){return new H(t)})),i=1;i<e.length;i++)for(var o=e[i],a=0;a<o.length;a++){var s=o[a],g=n.findIndex((function(e){return N(t,e,s)}));if(g>=0){var p=Object.assign({},s.options||{},n[g].options||{});n[g]=Object.assign(new H,s,n[g]),n[g].options=p}else n.push(new H(A(s)))}return n=n.filter((function(t){return!t.skip}))}(["timestep","label"],t.publications||[],e.publications||[]))}function U(t,e){for(var r in F){var n=F[r];if(e[n]&&(t[r]&&"string"==typeof t[r])){var i=t[r];t[r]=e[n][i]}}}var q=function(){},B=function(){function t(t){this.themes=[],t&&(Object.assign(this,t),this.themes=t.themes.map((function(t){return new z(t)})),this.propagateOptions(),this.instantiateNamedOptions())}return t.prototype.propagateOptions=function(){var t=this;this.themes.forEach((function(e){V(e,t),e.propagateOptions()}))},t.prototype.instantiateNamedOptions=function(){var t=this;this.publications&&this.publications.forEach((function(e){return e.instantiateNamedOptions(t)})),this.themes.forEach((function(e){return e.instantiateNamedOptions(t)}))},t.prototype.allLayers=function(){return this.themes.map((function(t){return t.layers})).reduce((function(t,e){return t.concat(e)}),[])},t}(),z=function(){function t(t){this.layers=[],t&&(Object.assign(this,t),t.layers?this.layers=t.layers.map((function(t){return new G(t)})):this.layers=[])}return t.prototype.propagateOptions=function(){var t=this;this.layers.forEach((function(e){V(e,t),e.propagateOptions(),e.dataCreator=e.dataCreator||t.dataCreator}))},t.prototype.instantiateNamedOptions=function(t){U(this.options,t),this.publications.forEach((function(e){return e.instantiateNamedOptions(t)})),this.layers.forEach((function(e){return e.instantiateNamedOptions(t)}))},t}(),G=function(){function t(t){this.publications=[],this.options=new q,t&&(Object.assign(this,t),t.publications?this.publications=t.publications.map((function(t){return new H(t)})):this.publications=[])}return t.prototype.propagateOptions=function(){var t=this;this.publications.forEach((function(e){V(e,t,!0)}))},t.prototype.instantiateNamedOptions=function(t){U(this.options,t),this.publications.forEach((function(e){return e.instantiateNamedOptions(t)}))},t}(),H=function(){function t(t){this.options=new q,t&&Object.assign(this,t)}return t.prototype.instantiateNamedOptions=function(t){U(this.options,t)},t}(),W=["annual","monthly","daily"],Z=function(t,e){var r=e.split("/");return r.pop(),t+"/catalog/"+r.join("/")+"/catalog.html"},Y=function(t,e,r){return r.layer.options.downloadPath||""+t+e},$={tds:Z,static:Y},J={tds:["layers","styles","colorscalerange","abovemaxcolor","belowmincolor","time","transparent","logscale"],geoserver:["transparent","layers"],esri:["layers","styles","transparent"]},Q={tds:"/wms/",geoserver:"/wms/",esri:"/"},X=["styles","layers"],K=function(){function t(t){this.options={date:new Date(2016,0,1)},this.retrievedMetadata={},this.wmsParameters={},this.flattenedSettings={},this.opacity=1,Object.assign(this,t||{}),void 0===this.layerType&&(this.layerType=this.wmsParameters?"wms":void 0)}return t.prototype.description=function(){return this.layer.description||this.retrievedMetadata&&this.retrievedMetadata[this.layer.descriptionField||"long_name"]},t.prototype.leading0=function(t){return t<10?"0"+t:""+t},t.prototype.defaultPublication=function(){var t=this,e=W.find((function(e){return t.layer.publications.findIndex((function(t){return t.timestep===e||t.label===e}))>=0}));return e?this.layer.publications.findIndex((function(t){return t.label===e||t.timestep===e})):this.layer.publications.findIndex((function(t){return!t.skip}))},t.prototype.update=function(){var t=this;this.options.publication=void 0===this.options.publication?this.defaultPublication():this.options.publication;var e=this.layer.publications[this.options.publication],r=e.options.host||{},n=r.url,i=r.software||"tds";this.interpolatedFile=e.options.filepath||"";var o,a,s=Object.assign({},this.layer,e.options,e.options.mapOptions||{},this.options.date?{decade:(o=this.options.date,a=o.getFullYear().toString().slice(0,3),a+"0-"+a+"9"),year:this.options.date.getFullYear(),month:this.leading0(this.options.date.getMonth()+1),day:this.leading0(this.options.date.getDate())}:{},this.options,this.options.tags||{});if(s.timeFormat&&(s.time=E.interpolate(s.timeFormat,s)),s.layers=s.layers||s.layer||s.variable,X.forEach((function(t){s[t]&&(s[t]=E.interpolate(s[t],s))})),this.interpolatedFile=E.interpolate(this.interpolatedFile,s),this.url=n+Q[i]+this.interpolatedFile,$[i]?this.interpolatedDownloadURL=$[i](r.downloadLink||n,this.interpolatedFile,this):this.interpolatedDownloadURL=r.downloadLink||null,"wms"===this.layer.options.legend?(this.legendURL=this.url+"?service=WMS&request=GetLegendGraphic&format=image/png",this.legendURL+="&layer="+E.interpolate(s.layers,s),this.legendURL+="&version=1.1.1",this.options.legend=!0):this.legendURL=null,s.vectors){this.wmsParameters=null,this.layerType="vector";var g=s.styles||{};this._styleFunc=function(t){return g},"point"===s.vectors&&s.styles&&(this.layerType="circle")}else this.layerType="wms",this.wmsParameters={},J[i].forEach((function(e){s[e]&&(t.wmsParameters[e]=s[e])}));this.flattenedSettings=s,s.titleFormat?this.title=E.interpolate(s.titleFormat,s):this.title=this.layer.name},t}();var tt=function(){function t(t,e){this._http=t,this.metadata=e}return t.prototype.load=function(t){var e=this;this.current=new B(t),this.current.allLayers().filter((function(t){return t.options.smallExtent})).forEach((function(t){t.spatialExtent=e.findExtentOfLayer(t)}))},t.prototype.loadFrom=function(t){var e=this;return this._http.get(t).pipe(p.tap((function(t){return e.load(t)})),p.map((function(t){return e.current})))},t.prototype.findExtentOfLayer=function(t){var e=new K;return e.layer=t,e.update(),this.metadata.getSpatialExtent(e)},t.ctorParameters=function(){return[{type:i.HttpClient},{type:P}]},t=y([e.Injectable(),f("design:paramtypes",[i.HttpClient,P])],t)}(),et=function(){function t(t){this._location=t}var r;return r=t,t.prototype.current=function(){if(!this._location)return{};var t=this._location.path().split("/");t.length>r.parameterNames.length&&t.shift();var e={};return r.parameterNames.forEach((function(r,n){return e[r]=t[n]||"_"})),e},t.prototype.update=function(t){if(this._location){var e=this.current();Object.assign(e,t),this._location.go(this.constructRoute(e))}},t.prototype.retrieveFromRoute=function(t){var e,n,i={};try{for(var o=m(r.parameterNames),a=o.next();!a.done;a=o.next()){var s=a.value;i[s]=t.snapshot.params[s]}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},t.prototype.constructRoute=function(t){return r.parameterNames.map((function(e){return t[e]||"_"})).join("/")},t.prototype.routerPaths=function(){var t,e,n=[],i="";n.push(i);try{for(var o=m(r.parameterNames),a=o.next();!a.done;a=o.next()){i+=":"+a.value,n.unshift(i),i+="/"}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return n},t.ctorParameters=function(){return[{type:s.Location}]},t.parameterNames=[],t=r=y([e.Injectable(),f("design:paramtypes",[s.Location])],t)}(),rt=Math.PI/180,nt=function(){function t(){this.webMercator=(h||b).Proj("EPSG:3857")}var r;return r=t,t.prototype.pointToWebMercator=function(t){var e={x:t.lng()*rt,y:t.lat()*rt};return this.webMercator.forward({x:e.x,y:e.y})},t.prototype.computeTileBounds=function(t,e,n){var i=t.getProjection(),o=Math.pow(2,n),a=r.TILE_WIDTH/o,s=r.TILE_HEIGHT/o,g=i.fromPointToLatLng({x:e.x*a,y:e.y*s}),p=i.fromPointToLatLng({x:(e.x+1)*a,y:(e.y+1)*s}),l=this.pointToWebMercator(g),b=this.pointToWebMercator(p);return l.x>b.x&&(180===g.lng()?l.x=-l.x:b.x=-b.x),[l.x,b.y,b.x,l.y].map((function(t){return t.toFixed(20).replace(/\.?0+$/,"")})).join(",")},t.prototype.buildImageMap=function(t,e,n,i){var o=this;return new window.google.maps.ImageMapType({getTileUrl:function(i,a){var s=t();if(!s)return"";var g=o.computeTileBounds(s,i,a),p=e(a)+"&service=WMS&version=1.1.1&request=GetMap";p+="&BBOX="+g,p+="&FORMAT=image/png";var l=n?n(a):{};for(var b in l.width=r.TILE_WIDTH,l.height=r.TILE_HEIGHT,l)p+="&"+b+"="+l[b];return p+="&SRS=EPSG:3857"},tileSize:new window.google.maps.Size(r.TILE_SIZE,r.TILE_SIZE),isPng:!0,opacity:i?i():1})},t.TILE_SIZE=256,t.TILE_WIDTH=r.TILE_SIZE,t.TILE_HEIGHT=r.TILE_SIZE,t=r=y([e.Injectable(),f("design:paramtypes",[])],t)}(),it=function(){function t(t){this._api=t}return t.prototype.geocode=function(t,e){var r=this,n=new Promise((function(e,n){r._api.load().then((function(){(new google.maps.Geocoder).geocode({address:t,componentRestrictions:{country:"AU"},region:"AU"},(function(t,r){r!==google.maps.GeocoderStatus.OK?n():e(t.filter((function(t){return"Australia"!==t.formatted_address})))}))}))}));return g.from(n)},t.ctorParameters=function(){return[{type:a.MapsAPILoader}]},t=y([e.Injectable(),f("design:paramtypes",[a.MapsAPILoader])],t)}(),ot=function(){function t(){}return t.prototype.proj4=function(){return b},t=y([e.Injectable(),f("design:paramtypes",[])],t)}(),at=[_,R,j,O,P,M,T,x,nt,et,ot,it,tt,C],st=function(){function t(){}var n;return n=t,t.forRoot=function(t){return{ngModule:n,providers:at}},t=n=y([e.NgModule({imports:[s.CommonModule,r.FormsModule,a.AgmCoreModule,i.HttpClientModule],declarations:[],exports:[],providers:at})],t)}(),gt=function(){function t(t,e){this._wmsService=t,this._wrapper=e,this.opacity=1,this.position=0,this.zoom=4,this.building=!1}return t.prototype.buildMap=function(){var t=this;this.building||(this.building=!0,this._wrapper.getNativeMap().then((function(e){if(t.building=!1,t.map=e,t.overlay=t._wmsService.buildImageMap((function(){return t.map}),(function(e){return t.url+"?"}),(function(e){return t.params}),(function(){return t.opacity})),t.map.overlayMapTypes.length>t.position)t.map.overlayMapTypes.removeAt(t.position),t.map.overlayMapTypes.insertAt(t.position,t.overlay);else for(;t.map.overlayMapTypes.length<=t.position;)t.map.overlayMapTypes.push(t.overlay)})).catch((function(t){return console.log(t)})))},t.prototype.ngOnInit=function(){this.url&&this.buildMap()},t.prototype.ngOnChanges=function(t){this.url&&this.buildMap()},t.prototype.ngOnDestroy=function(){var t=this;this._wrapper.getNativeMap().then((function(e){t.map.overlayMapTypes.length>t.position&&t.map.overlayMapTypes.removeAt(t.position)}))},t.ctorParameters=function(){return[{type:nt},{type:a.GoogleMapsAPIWrapper}]},y([e.Input(),f("design:type",String)],t.prototype,"url",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"params",void 0),y([e.Input(),f("design:type",Number)],t.prototype,"opacity",void 0),y([e.Input(),f("design:type",Number)],t.prototype,"position",void 0),t=y([e.Component({selector:"wms-layer",template:""}),f("design:paramtypes",[nt,a.GoogleMapsAPIWrapper])],t)}(),pt=function(){function t(t){this._palettes=t,this.colours=["red","white","blue"],this.labels=[],this.title="the title",this.mapUnits="",this.helpText="No comment",this.tooltipPlacement="right",this.generatedLabels=[],this.formatValue=function(t,e){if(!t)return 0===t?"0":"-";var r=t.toString().split(".");return r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),0===e?r[0]:(null!=e&&2===r.length&&(r[1]=r[1].substr(0,e),r[1]=r[1].replace(/0+$/,"")),r.join("."))}}return Object.defineProperty(t.prototype,"cbPalette",{get:function(){return this._cbPalette},set:function(t){this._cbPalette=t,this.generatePalette()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cbCount",{get:function(){return this._cbCount},set:function(t){this._cbCount=t,this.generatePalette()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cbReverse",{get:function(){return this._cbReverse},set:function(t){this._cbReverse=t,this.generatePalette()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cbRange",{get:function(){return this._cbRange},set:function(t){this._cbRange=t,this.generatePalette()},enumerable:!0,configurable:!0}),t.prototype.generateLabels=function(t){if(!this._cbRange||!t)return null;var e,r=(this._cbRange[1]-this._cbRange[0])/(t-1),n=[],i=this._cbRange[0],o=Math.max(0,2-+Math.log10(this._cbRange[1]-this._cbRange[0]).toFixed());o=Math.min(o,10);for(var a=1;a<t;a++)e=this._cbRange[0]+a*r,n.push(this.formatValue(i,o)+"-"+this.formatValue(e,o)),i=e;return n.push("&ge;"+this._cbRange[1]),n.reverse(),n},t.prototype.generatePalette=function(){var t=this;this._cbPalette&&this._cbCount&&this._palettes.getPalette(this._cbPalette,this._cbReverse,this._cbCount).subscribe((function(e){t.colours=e.slice().reverse(),t.generatedLabels=t.labels||t.generateLabels(t.colours.length)||e}))},t.prototype.ngOnInit=function(){},t.ctorParameters=function(){return[{type:T}]},y([e.Input(),f("design:type",String)],t.prototype,"imageURL",void 0),y([e.Input(),f("design:type",Array)],t.prototype,"colours",void 0),y([e.Input(),f("design:type",Array)],t.prototype,"labels",void 0),y([e.Input(),f("design:type",String)],t.prototype,"title",void 0),y([e.Input(),f("design:type",String)],t.prototype,"mapUnits",void 0),y([e.Input(),f("design:type",String)],t.prototype,"helpText",void 0),y([e.Input(),f("design:type",String)],t.prototype,"tooltipPlacement",void 0),y([e.Input(),f("design:type",String)],t.prototype,"attribution",void 0),y([e.Input(),f("design:type",String)],t.prototype,"attributionLink",void 0),y([e.Input(),f("design:type",String),f("design:paramtypes",[String])],t.prototype,"cbPalette",null),y([e.Input(),f("design:type",Number),f("design:paramtypes",[Number])],t.prototype,"cbCount",null),y([e.Input(),f("design:type",Boolean),f("design:paramtypes",[Boolean])],t.prototype,"cbReverse",null),y([e.Input(),f("design:type",Array),f("design:paramtypes",[Array])],t.prototype,"cbRange",null),t=y([e.Component({selector:"map-legend",template:'<div class="map-legend panel panel-group">\n\n<strong>{{title}} <span *ngIf="mapUnits" [innerHTML]="\'(\'+mapUnits+\')\'"></span>\n        <span *ngIf="helpText"\n              [ngbTooltip]="helpText"\n              [placement]="tooltipPlacement"\n              container="body">\n          <i class="fa fa-info-circle"></i>\n        </span>\n</strong>\n\n  <div *ngIf="!imageURL">\n    <div style="display:table;line-height:15px">\n      <div style="display:table-row;padding:0;"\n          *ngFor="let colour of colours; let i=index">\n        <div class="legend-colour">\n          <i class="legend-entry" [ngStyle]="{background:colour}"></i>\n        </div>\n        <div class="legend-label">\n          <span [innerHTML]="generatedLabels[i]"></span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div *ngIf="imageURL">\n    <img [src]="imageURL">\n  </div>\n  <p *ngIf="attributionLink">Source: <a [href]="attributionLink">{{attribution || \'details\'}}</a></p>\n  <p *ngIf="attribution&&!attributionLink">Source: {{attribution}}</p>\n</div>\n',styles:["\n.map-legend{\n  display:block;\n  background: white;\n}\n\n.legend-colour{\n  display:table-cell;\n  padding:0px;\n}\n\n.legend-label{\n  display:table-cell;\n  padding:0px 4px 2px 2px;\n  font-size:10px;\n  vertical-align:middle;\n}\n\n.legend-entry {\n  float: left;\n  width: 15px !important;\n  height: 15px !important;\n}\n"]}),f("design:paramtypes",[T])],t)}(),lt=function(){function t(t,e){this._el=t,this._wrapper=e,this.position="TOP_RIGHT"}return t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){var t=this;this._wrapper.getNativeMap().then((function(e){var r=t._el.nativeElement.querySelector(".map-control-content");if("DIV"!==r.nodeName){var n=document.createElement("div");n.appendChild(r),r=n}e.controls[window.google.maps.ControlPosition[t.position]].push(r)}))},t.ctorParameters=function(){return[{type:e.ElementRef},{type:a.GoogleMapsAPIWrapper}]},y([e.ViewChild("mapControl",{static:!1}),f("design:type",e.Component)],t.prototype,"mapControl",void 0),y([e.Input(),f("design:type",String)],t.prototype,"position",void 0),t=y([e.Component({selector:"map-control",template:'<div #mapControl class="map-control-content">\n  <ng-content></ng-content>\n</div>\n',styles:[".map-control-content{\n  background: transparent;\n}\n"]}),f("design:paramtypes",[e.ElementRef,a.GoogleMapsAPIWrapper])],t)}(),bt=function(){function t(){this.interval=2e3,this.limits=null,this.date=new Date,this.dateChange=new e.EventEmitter,this.value=0,this.label="-",this.timer=0,this.dateText="-"}return t.prototype.ngOnChanges=function(t){t.interval&&this.startTimer()},t.prototype.startTimer=function(){var t=this;this.timer&&clearInterval(this.timer),this.timer=window.setInterval((function(){return t.tick()}),this.interval)},t.prototype.ngAfterViewInit=function(){this.startTimer()},t.prototype.reset=function(){this.value=0,this.sliderMoved()},t.prototype.tick=function(){if(this.value){var t=this.value<0?-1:1;switch(this.date=new Date(this.date.getTime()),Math.abs(this.value)){case 1:this.date.setDate(this.date.getDate()+t);break;case 2:this.date.setDate(this.date.getDate()+7*t);break;case 3:this.date.setMonth(this.date.getMonth()+t);break;case 4:this.date.setFullYear(this.date.getFullYear()+t)}this.limits&&this.limits.length&&(this.date.getTime()<this.limits[0].getTime()&&(this.date=this.limits[0]),this.date.getTime()>this.limits[1].getTime()&&(this.date=this.limits[1])),this.setDateText(),this.dateChange.emit(this.date)}},t.prototype.setDateText=function(){this.dateText=this.date.toLocaleDateString()},t.prototype.sliderMoved=function(){this.setLabel()},t.prototype.setLabel=function(){switch(this.value<0?this.label="back 1":this.value>0?this.label="advance 1":this.label="-",Math.abs(this.value)){case 1:this.label+="day";break;case 2:this.label+="week";break;case 3:this.label+="month";break;case 4:this.label+="year"}},y([e.Input(),f("design:type",Object)],t.prototype,"interval",void 0),y([e.Input(),f("design:type",Array)],t.prototype,"limits",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"date",void 0),y([e.Output(),f("design:type",Object)],t.prototype,"dateChange",void 0),t=y([e.Component({selector:"date-shifter",template:'<div>\n  <h3>{{dateText}}</h3>\n  <input type="range"\n         class="form-control"\n         min="-4"\n         [max]="4"\n         step="1"\n         [(ngModel)]="value"\n         (ngModelChange)="sliderMoved()"\n         (mouseup)="reset()">\n  <h4>{{label}}</h4>\n</div>\n\n  ',styles:[""]}),f("design:paramtypes",[])],t)}(),ct=function(){function t(t){this.modalService=t,this.label="About",this.hideMessage="Understood, I don’t need to see this again"}return t.prototype.storageKey=function(){return this.application?this.application+"-splash-skip":null},t.prototype.ngAfterViewInit=function(){var t=this;setTimeout((function(){var e=t.storageKey();e&&(t.doNotShow=c.get(e,!1)),t.doNotShow||t.show()}))},t.prototype.show=function(){this.current=this.modalService.open(this.splashTemplate,{size:"lg",windowClass:this.klass})},t.prototype.close=function(){this.current&&(this.current.close(),this.current=null)},t.prototype.doNotShowClicked=function(){var t=this.storageKey();t&&c.set(t,this.doNotShow)},t.ctorParameters=function(){return[{type:n.NgbModal}]},y([e.ViewChild("splashTemplate",{static:!1}),f("design:type",Object)],t.prototype,"splashTemplate",void 0),y([e.Input(),f("design:type",String)],t.prototype,"application",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"label",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"hideMessage",void 0),y([e.Input(),f("design:type",String)],t.prototype,"klass",void 0),t=y([e.Component({selector:"one-time-splash",template:'<ng-template #splashTemplate let-c="close" let-d="dismiss">\n  <div class="modal-header">\n    <h4 class="modal-title">\n      {{label}}</h4>\n    <button type="button" class="close" aria-label="Close" (click)="d(\'Cross click\')">\n      <span aria-hidden="true">&times;</span>\n    </button>\n  </div>\n  <div class="modal-body">\n    <ng-content></ng-content>\n  </div>\n  <div class="modal-footer">\n    <label *ngIf="application">\n      <input type="checkbox" [(ngModel)]="doNotShow" (ngModelChange)="doNotShowClicked()">\n      &nbsp; {{hideMessage}}\n    </label>\n    <button type="button" class="btn btn-secondary" (click)="c(\'Close click\')">Close</button>\n  </div>\n  </ng-template>\n',styles:[""]}),f("design:paramtypes",[n.NgbModal])],t)}(),ut=function(){function t(){this.step=1,this.changed=new e.EventEmitter}return t.prototype.ngAfterViewInit=function(){},t.prototype.move=function(t){this.src[this.property]+=t,this.changed.emit(this.src)},y([e.Input(),f("design:type",String)],t.prototype,"label",void 0),y([e.Input(),f("design:type",String)],t.prototype,"property",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"src",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"step",void 0),y([e.Output(),f("design:type",Object)],t.prototype,"changed",void 0),t=y([e.Component({selector:"date-element",template:'<div class="row no-gutters">\n  <div class="col-4">{{label}}</div>\n  <div class="col-2">\n    <button class="btn btn-secondary btn-sm" (click)="move(-step)">\n      <i class="fa fa-angle-left"></i>\n    </button>\n  </div>\n  <div class="col-4"><button class="btn btn-link btn-sm">{{src[property]}}</button></div>\n  <div class="col-2">\n    <button class="btn btn-secondary btn-sm" (click)="move(step)">\n      <i class="fa fa-angle-right"></i>\n    </button>\n  </div>\n</div>\n'}),f("design:paramtypes",[])],t)}(),dt=function(){function t(){}return t.prototype.ngAfterViewInit=function(){},t=y([e.Component({selector:"share-view",template:'<button class="btn btn-secondary btn-sm"\n        ngbTooltip="Share current view"\n        placement="right"\n        [disabled]="true"\n><i class="fa fa-share-alt"></i></button>\n'}),f("design:paramtypes",[])],t)}(),ht=function(){function t(){}return t.prototype.ngAfterViewInit=function(){},t=y([e.Component({selector:"location-search",template:'<button class="btn btn-secondary btn-sm"\n        ngbTooltip="Location search"\n        placement="right"\n        [disabled]="true"\n\n><i class="fa fa-search"></i></button>\n'}),f("design:paramtypes",[])],t)}(),yt=function(){function t(t,r,n){this._zone=t,this.staticData=r,this.metadata=n,this.layers=[],this.markers=[],this.mapTypeId="roadmap",this.layersChange=new e.EventEmitter,this.featureSelected=new e.EventEmitter,this.pointSelected=new e.EventEmitter,this.mapTypePosition=u.ControlPosition.BOTTOM_LEFT,this.streetViewControl=!0,this.selectedFeature=null,this.zoom=4,this.showMapType=!0,this.mapTypeOptions={position:u.ControlPosition.BOTTOM_LEFT},this.lat=-22.673858,this.lng=129.815982}return t.prototype.ngOnChanges=function(t){var e=this;t.mapTypePosition&&(null===this.mapTypePosition&&(this.showMapType=!1),this.mapTypeOptions={position:this.mapTypePosition}),t.layers&&this.setLayerPositions(),t.markers&&this.markers&&(this.infoWindows&&this.infoWindows.forEach((function(t,r){e._zone.runOutsideAngular((function(){return t.close()}))})),setTimeout((function(){e.infoWindows.forEach((function(t,r){e.markers[r].open?e._zone.runOutsideAngular((function(){return t.open()})):e._zone.runOutsideAngular((function(){return t.close()}))}))}))),t.bounds&&setTimeout((function(){return e._bounds=e.bounds}))},t.prototype.ngAfterViewInit=function(){},t.prototype.layersChanged=function(t){},t.prototype.layerAdded=function(t){var e=this;if(!this.layers.find((function(e){return e.layer===t.layer}))){var r=new K;r.layer=t.layer,r.layerType="wms",r.options.legend=!0,t.layer.options.vectors?this.staticData.get(t.layer.options.host,t.layer.options.filepath).subscribe((function(n){r.staticData=n,e.activateLayer(r,t)})):this.activateLayer(r,t)}},t.prototype.activateLayer=function(t,e){t.update(),"replace"===e.action&&(e.filter?this.layers=this.layers.filter((function(t){return!e.filter(t)})):this.layers=[]),this.layers=[t].concat(this.layers),this.setLayerPositions(),this.layersChange.emit(this.layers)},t.prototype.setLayerPositions=function(){for(var t=0,e=this.layers.length-1;e>=0;e--)"wms"===this.layers[e].layerType&&(this.layers[e].options.position=t,t++)},t.prototype.extractFeature=function(t){var e=t.getGeometry();e={type:"Point",coordinates:e.get(0)};var r={};return t.forEachProperty((function(t,e){return r[e]=t})),{type:"Feature",geometry:e,properties:r}},t.prototype.clicked=function(t){var e=this.extractFeature(t.feature);this.selectedFeature=e,this.featureSelected.emit({feature:e})},t.prototype.circleClicked=function(t,e){this.selectedFeature=e,this.featureSelected.emit({feature:e,layer:t})},t.prototype.mapClick=function(t){var e=t.coords;this.pointSelected.emit(e)},t.prototype.zoomToBounds=function(t){this._bounds=t},t.prototype.zoomChanged=function(){this.layers=this.layers.slice()},t.ctorParameters=function(){return[{type:e.NgZone},{type:O},{type:P}]},y([e.Input(),f("design:type",Array)],t.prototype,"layers",void 0),y([e.Input(),f("design:type",Array)],t.prototype,"markers",void 0),y([e.Input(),f("design:type",String)],t.prototype,"mapTypeId",void 0),y([e.Output(),f("design:type",Object)],t.prototype,"layersChange",void 0),y([e.Output(),f("design:type",Object)],t.prototype,"featureSelected",void 0),y([e.Output(),f("design:type",Object)],t.prototype,"pointSelected",void 0),y([e.Input(),f("design:type",Number)],t.prototype,"mapTypePosition",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"streetViewControl",void 0),y([e.ViewChild(a.AgmMap,{static:!1}),f("design:type",a.AgmMap)],t.prototype,"theMap",void 0),y([e.ViewChildren("infoWindows"),f("design:type",e.QueryList)],t.prototype,"infoWindows",void 0),y([e.Input(),f("design:type",Number)],t.prototype,"zoom",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"showMapType",void 0),y([e.Input(),f("design:type",Number)],t.prototype,"lat",void 0),y([e.Input(),f("design:type",Number)],t.prototype,"lng",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"bounds",void 0),t=y([e.Component({selector:"layered-map",template:'<agm-map #theMap\n[(latitude)]="lat"\n[(longitude)]="lng"\n[(zoom)]="zoom"\n(zoomChange)="zoomChanged()"\n[disableDefaultUI]="false"\n[zoomControl]="false"\n[mapTypeId]="mapTypeId"\n[mapTypeControl]="showMapType"\n[mapTypeControlOptions]="mapTypeOptions"\n[streetViewControl]="streetViewControl"\nscaleControl="true"\n[fitBounds]="_bounds"\n(mapClick)="mapClick($event)">\n\n<agm-marker *ngFor="let marker of markers"\n            [longitude]="marker.loc.lng"\n            [latitude]="marker.loc.lat"\n            [iconUrl]="marker.iconUrl">\n  <agm-info-window #infoWindows [disableAutoPan]="true">\n    <strong>{{marker.value}}</strong>\n  </agm-info-window>\n</agm-marker>\n\n<ng-container *ngFor="let mp of layers.slice()|reverse; let i = index" [ngSwitch]="mp.layerType">\n  <wms-layer *ngSwitchCase="\'wms\'"\n    [url]="mp.url"\n    [params]="mp.wmsParameters"\n    [opacity]="mp.opacity"\n    [position]="mp.options.position">\n  </wms-layer>\n  <agm-data-layer *ngSwitchCase="\'vector\'"\n                [geoJson]="mp.staticData"\n                [style]="mp._styleFunc"\n                (layerClick)="clicked($event)"\n\n                >\n  </agm-data-layer>\n\n  <ng-container *ngSwitchCase="\'circle\'">\n    <agm-circle *ngFor="let f of mp.staticData.features; let j=index"\n                [latitude]="f.geometry.coordinates[1]"\n                [longitude]="f.geometry.coordinates[0]"\n                [radius]="10000000/(zoom*zoom*zoom*zoom)"\n                [fillColor]="mp.flattenedSettings?.styles?.fillColor||\'black\'"\n                [fillOpacity]="mp.flattenedSettings?.styles?.fillOpacity||1"\n                [strokeColor]="mp.flattenedSettings?.styles?.strokeColor||\'black\'"\n                [strokeOpacity]="mp.flattenedSettings?.styles?.strokeOpacity||1"\n                [strokePosition]="0"\n                [strokeWeight]="(f===selectedFeature)?3:(mp.flattenedSettings?.styles?.strokeWeight||0.5)"\n                (circleClick)="circleClicked(mp,f)"\n                >\n    </agm-circle>\n  </ng-container>\n\n  \x3c!--\n  --\x3e\n</ng-container>\n\n\x3c!-- for map controls --\x3e\n<map-control position="TOP_CENTER">\n    <ng-content select=".map-control.top-center"></ng-content>\n</map-control>\n\n<map-control position="TOP_LEFT">\n    <ng-content select=".map-control.top-left"></ng-content>\n</map-control>\n\n<map-control position="TOP_RIGHT">\n    <ng-content select=".map-control.top-right"></ng-content>\n</map-control>\n\n<map-control position="LEFT_TOP">\n    <ng-content select=".map-control.left-top"></ng-content>\n</map-control>\n\n<map-control position="RIGHT_TOP">\n    <ng-content select=".map-control.right-top"></ng-content>\n</map-control>\n\n<map-control position="LEFT_CENTER">\n    <ng-content select=".map-control.left-center"></ng-content>\n</map-control>\n\n<map-control position="RIGHT_CENTER">\n    <ng-content select=".map-control.right-center"></ng-content>\n</map-control>\n\n<map-control position="LEFT_BOTTOM">\n    <ng-content select=".map-control.left-bottom"></ng-content>\n</map-control>\n\n<map-control position="RIGHT_BOTTOM">\n    <ng-content select=".map-control.right-bottom"></ng-content>\n</map-control>\n\n<map-control position="BOTTOM_CENTER">\n    <ng-content select=".map-control.bottom-center"></ng-content>\n</map-control>\n\n<map-control position="BOTTOM_LEFT">\n    <ng-content select=".map-control.bottom-left"></ng-content>\n</map-control>\n\n<map-control position="BOTTOM_RIGHT">\n    <ng-content select=".map-control.bottom-right"></ng-content>\n</map-control>\n\n</agm-map>\n\n'}),f("design:paramtypes",[e.NgZone,O,P])],t)}(),ft=function(){function t(){}return t.prototype.ngAfterViewInit=function(){},t.prototype.zoomToLayer=function(){var t=this;this.layer.layer.spatialExtent?(console.log("Zoom to layer"),this.layer.layer.spatialExtent.subscribe((function(e){t.map.zoomToBounds(Object.assign({},e))}))):(console.log("Zoom full"),this.map.zoomToBounds(Object.assign({},this.fullBounds)))},y([e.Input(),f("design:type",yt)],t.prototype,"map",void 0),y([e.Input(),f("design:type",K)],t.prototype,"layer",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"fullBounds",void 0),t=y([e.Component({selector:"zoom-layer",template:'<button type="button" [disabled]="!layer" class="btn btn-secondary btn-sm"\n        ngbTooltip="Zoom to selected layer"\n        placement="right"\n        (click)="zoomToLayer()"\n><i class="fa fa-compress"></i>\n</button>\n'}),f("design:paramtypes",[])],t)}(),mt=function(){function t(){}return t.prototype.ngAfterViewInit=function(){},t.prototype.zoomToBounds=function(){this.map.zoomToBounds(Object.assign({},this.bounds))},y([e.Input(),f("design:type",yt)],t.prototype,"map",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"bounds",void 0),t=y([e.Component({selector:"zoom-full",template:'<button class="btn btn-secondary btn-sm"\n        ngbTooltip="Zoom to full extent"\n        placement="right"\n        (click)="zoomToBounds()"\n><i class="fa fa-arrows-alt"></i></button>\n'}),f("design:paramtypes",[])],t)}(),vt=function(){function t(){this.minZoom=1}return t.prototype.ngAfterViewInit=function(){},t.prototype.zoomOut=function(){this.map&&(this.map.zoom=Math.max(this.minZoom,this.map.zoom-1))},y([e.Input(),f("design:type",yt)],t.prototype,"map",void 0),y([e.Input(),f("design:type",Number)],t.prototype,"minZoom",void 0),t=y([e.Component({selector:"zoom-out",template:'<button class="btn btn-secondary btn-sm"\n        ngbTooltip="Zoom out"\n        placement="right"\n        (click)="zoomOut()"\n><i class="fa fa-minus"></i></button>'}),f("design:paramtypes",[])],t)}(),It=function(){function t(){this.maxZoom=32}return t.prototype.ngAfterViewInit=function(){},t.prototype.zoomIn=function(){this.map&&(this.map.zoom=Math.min(this.maxZoom,this.map.zoom+1))},y([e.Input(),f("design:type",yt)],t.prototype,"map",void 0),y([e.Input(),f("design:type",Number)],t.prototype,"maxZoom",void 0),t=y([e.Component({selector:"zoom-in",template:'<button class="btn btn-secondary btn-sm"\n        ngbTooltip="Zoom in"\n        placement="right"\n        (click)="zoomIn()"\n><i class="fa fa-plus"></i></button>'}),f("design:paramtypes",[])],t)}(),Ct=function(){function t(){this.maxZoom=32,this.baseLayers=[{map_type_id:"roadmap",label:"Road Map"},{map_type_id:"satellite",label:"Satellite"}],this.tooltip="Toggle base layer"}return t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnChanges=function(t){this.baseLayers&&!this.baseLayer&&(this.baseLayer=this.baseLayers[0])},t.prototype.toggleBaseLayer=function(){var t=this;if(this.map){var e=(this.baseLayers.findIndex((function(e){return e.map_type_id===t.baseLayer.map_type_id}))+1)%this.baseLayers.length;this.baseLayer=this.baseLayers[e],this.map.mapTypeId=this.baseLayer?this.baseLayer.map_type_id:null}},y([e.Input(),f("design:type",yt)],t.prototype,"map",void 0),y([e.Input(),f("design:type",Number)],t.prototype,"maxZoom",void 0),y([e.Input(),f("design:type",Array)],t.prototype,"baseLayers",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"baseLayer",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"tooltip",void 0),t=y([e.Component({selector:"cycle-base-map",template:'<button class="btn btn-secondary btn-sm" (click)="toggleBaseLayer()" [ngbTooltip]="tooltip"\n                     placement="right">\n  <i class="fa" [ngClass]="baseLayer?.label===\'Road Map\'?\'fa-road\':\'fa-globe\'"></i>\n</button>'}),f("design:paramtypes",[])],t)}(),wt=function(){function t(){this.maxZoom=32,this.tooltip="Adjust transparency of grid layer",this.layerOpacity=1,this.step=.4}return t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnChanges=function(t){var e=this;this.map&&this.map.layersChange.subscribe((function(){return e.updateLayers()}))},t.prototype.cycleTransparency=function(){this.layerOpacity-=this.step,this.layerOpacity<0&&(this.layerOpacity=1),this.updateLayers()},t.prototype.updateLayers=function(){var t=this;this.map.layers.forEach((function(e){return e.opacity=t.layerOpacity}))},y([e.Input(),f("design:type",yt)],t.prototype,"map",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"maxZoom",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"tooltip",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"layerOpacity",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"step",void 0),t=y([e.Component({selector:"cycle-opacity",template:'<button class="btn btn-secondary btn-sm"\n                     (click)="cycleTransparency()"\n                     [ngbTooltip]="tooltip"\n                     placement="right">\n<i class="fa" [ngClass]="(layerOpacity<0.5)?\'fa-circle-o\':((layerOpacity<0.9)?\'fa-adjust\':\'fa-circle\')"></i>\n</button>'}),f("design:paramtypes",[])],t)}(),Tt=function(){function t(){}return t.prototype.ngAfterViewInit=function(){},t=y([e.Component({selector:"button-bar",template:'<div class="button-bar bb-vertical">\n  <ng-content></ng-content>\n</div>\n\n',styles:["\n"]}),f("design:paramtypes",[])],t)}(),St=function(){function t(t){this._element=t,this.timeSeries=[],this.marginLeft=40,this.marginRight=10,this.marginTop=0,this.marginBottom=20,this.titlefont=void 0}return t.prototype.ngAfterViewInit=function(){this.draw()},t.prototype.ngOnChanges=function(t){this.draw()},t.prototype.draw=function(){var t=this._element.nativeElement.querySelector(".our-chart");if(d.purge(t),this.timeSeries&&this.timeSeries.length){var e,r=this.timeSeries.map((function(t){return t.units}));r.every((function(t){return t===r[0]}))&&(e=r[0]);var n={margin:{t:this.marginTop+(this.title?30:0),l:this.marginLeft,r:this.marginRight,b:this.marginBottom},yaxis:{fixedrange:!0,title:e},width:320,height:200,title:this.title||void 0,titlefont:this.titlefont};d.plot(t,this.timeSeries.map((function(t){var r=t.values.filter((function(t){return!isNaN(t)})).length,n="bar"!==t.style&&r<365?"lines+markers":void 0,i=e?"":" ("+t.units+")";return{type:"bar"===t.style?"bar":void 0,mode:n,x:t.dates,y:t.values,name:t.label+i}})),n)}},t.ctorParameters=function(){return[{type:e.ElementRef}]},y([e.Input(),f("design:type",String)],t.prototype,"title",void 0),y([e.Input(),f("design:type",Array)],t.prototype,"timeSeries",void 0),y([e.Input(),f("design:type",Number)],t.prototype,"marginLeft",void 0),y([e.Input(),f("design:type",Number)],t.prototype,"marginRight",void 0),y([e.Input(),f("design:type",Number)],t.prototype,"marginTop",void 0),y([e.Input(),f("design:type",Number)],t.prototype,"marginBottom",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"titlefont",void 0),t=y([e.Component({selector:"timeseries-chart",template:'<div class="our-chart">\n</div>\n'}),f("design:paramtypes",[e.ElementRef])],t)}(),xt=function(){function t(){this.styles={},this._keys=Object.keys}return t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnChanges=function(t){this.styles||(this.styles={})},y([e.Input(),f("design:type",Object)],t.prototype,"feature",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"styles",void 0),t=y([e.Component({selector:"feature-table",template:'<table *ngIf="feature" class="table table-striped table-sm feature-table">\n  <thead>\n    <tr>\n      <td><strong>Property</strong></td>\n      <td><strong>Value</strong></td>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><strong>Geometry</strong></td>\n      <td>{{feature.geometry.type}}</td>\n    </tr>\n    <tr *ngFor="let prop of _keys(feature.properties)">\n      <td><strong>{{prop}}</strong></td>\n      <td *ngIf="!styles||!styles[prop]">{{feature.properties[prop]}}</td>\n      <td *ngIf="styles&&styles[prop]">\n        <a *ngIf="styles[prop].hyperlink" target="_blank" [href]="feature.properties[prop]">\n          {{feature.properties[prop]}}\n        </a>\n      </td>\n    </tr>\n  </tbody>\n</table>',styles:[".feature-table{\n  max-width:300px;\n}"]}),f("design:paramtypes",[])],t)}(),Ot=function(){function t(){}return t.prototype.ngAfterViewInit=function(){},y([e.Input(),f("design:type",Boolean)],t.prototype,"isCollapsed",void 0),y([e.Input(),f("design:type",String)],t.prototype,"heading",void 0),y([e.Input(),f("design:type",String)],t.prototype,"direction",void 0),t=y([e.Component({selector:"collapsible-map-control",template:'<div class="card map-control collapsible-control">\n    <a (click)="isCollapsed = !isCollapsed">\n      <div class="card-header">\n        <h6 class="mb-0">\n          {{heading}}\n          <span *ngIf="isCollapsed" class="float-right fa fa-caret-up\n            collapse-arrow" aria-hidden="true"></span>\n          <span *ngIf="!isCollapsed" class="float-right fa fa-caret-down\n            collapse-arrow" aria-hidden="true"></span>\n        </h6>\n      </div>\n    </a>\n\n    <div class="ngbCollapse" [ngbCollapse]="isCollapsed">\n      <ng-content></ng-content>\n    </div>\n  </div>\n',styles:[".collapsible-control{\n  margin:3px;\n}"]}),f("design:paramtypes",[])],t)}(),Mt=function(){function t(){}return t.prototype.ngAfterViewInit=function(){},t=y([e.Component({selector:"base-map-selection",template:"<p>base-map-selection Component</p>"}),f("design:paramtypes",[])],t)}(),Dt=function(){function t(){this.options={},this.nodeSelected=new e.EventEmitter}return t.prototype.ngOnChanges=function(t){this.evalState()},t.prototype.ngAfterViewInit=function(){},t.prototype.treeClick=function(t){t.stopPropagation(),t.preventDefault(),this.tree&&(this.tree.expanded=!this.tree.expanded,this.evalState(),this.tree.actions&&this.tree.actions.length?this.tree.actions[0].action(this.tree):this.nodeSelected.emit(this.tree))},t.prototype.evalState=function(){this.expanded=this.tree&&this.tree.expanded&&this.tree.children&&this.tree.children.length>0,this.leaf=this.tree&&(!this.tree.children||0===this.tree.children.length),this.collapsed=this.tree&&!this.tree.expanded&&this.tree.children&&this.tree.children.length>0,this.expanded?this.icon=this.options.expandedIcon:this.collapsed?this.icon=this.options.collapsedIcon:this.icon=this.options.leafIcon},y([e.Input(),f("design:type",Object)],t.prototype,"tree",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"options",void 0),y([e.Output(),f("design:type",Object)],t.prototype,"nodeSelected",void 0),t=y([e.Component({selector:"simple-tree-node",template:'<a href="#" \n                (click)="treeClick($event)"\n                [ngClass]="tree.klass"><i [ngClass]="icon"></i>\n  &nbsp;\n  <span ngbTooltip="{{tree.tooltip | async}}"\n        placement="right"\n        container="body">{{tree.label}}</span>\n  <span *ngIf="tree.actions"\n        class="float-right">\n      &nbsp;\n      <i *ngFor="let a of tree.actions"\n       [ngClass]="a.icon"\n       ngbTooltip="{{a.tooltip | async}}"\n       placement="right"\n       container="body"\n       (click)="a.action(tree)">&nbsp;</i>\n  </span>\n</a>\n'})],t)}(),Lt=function(){function t(){this.showTop=!0,this.collapsedIcon="fa fa-caret-right",this.expandedIcon="fa fa-caret-down",this.leafIcon="fa fa-minus",this.nodeSelected=new e.EventEmitter,this.options={}}return t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnChanges=function(t){t.options||(this.options={collapsedIcon:this.collapsedIcon,expandedIcon:this.expandedIcon,leafIcon:this.leafIcon})},t.prototype.childSelected=function(t){this.nodeSelected.emit(t)},y([e.Input(),f("design:type",Object)],t.prototype,"tree",void 0),y([e.Input(),f("design:type",Boolean)],t.prototype,"showTop",void 0),y([e.Input(),f("design:type",Boolean)],t.prototype,"inner",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"collapsedIcon",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"expandedIcon",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"leafIcon",void 0),y([e.Output(),f("design:type",Object)],t.prototype,"nodeSelected",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"options",void 0),t=y([e.Component({selector:"simple-tree",template:'<div *ngIf="tree&&tree.visible" class="simple-tree">\n\n  <div *ngIf="inner">\n    <li ><simple-tree-node [tree]="tree"\n                           [options]="options"\n                           (nodeSelected)="childSelected($event)"></simple-tree-node>\n      <ul *ngIf="tree.children&&tree.expanded" class="inner-list">\n        <simple-tree *ngFor="let t of tree.children" [tree]="t" [inner]="true"\n                    (nodeSelected)="childSelected($event)"\n                    [options]="options"></simple-tree>\n      </ul>\n    </li>\n  </div>\n\n  <div *ngIf="!inner&&showTop">\n    <ul class="outer-list">\n      <li><simple-tree-node [tree]="tree" [options]="options"\n        (nodeSelected)="childSelected($event)"></simple-tree-node>\n        <ul *ngIf="tree.children&&tree.expanded" class="inner-list">\n            <simple-tree *ngFor="let t of tree.children" [tree]="t" [inner]="true"\n            (nodeSelected)="childSelected($event)"\n            [options]="options"></simple-tree>\n        </ul>\n      </li>\n    </ul>\n  </div>\n\n  <div *ngIf="!inner&&!showTop">\n      <ul *ngIf="tree.children&&tree.expanded" class="outer-list">\n          <simple-tree *ngFor="let t of tree.children" [tree]="t" [inner]="true"\n          (nodeSelected)="childSelected($event)"\n          [options]="options"></simple-tree>\n      </ul>\n    </div>\n  \n</div>\n',styles:["\n.simple-tree ul{\n  list-style-type: none\n}\n\nul.outer-list{\n  padding-left:5px;\n}\n\nul.inner-list{\n  padding-left:15px;\n}"]}),f("design:paramtypes",[])],t)}(),kt=function(){function t(t,r){this.metadata=r,this.showPlaceholders=!0,this.defaultAction="add",this.layerActions=[],this.layerSelected=new e.EventEmitter,this.collapsedIcon="fa fa-caret-right",this.expandedIcon="fa fa-caret-down",this.leafIcon="fa fa-minus",this.layers=[],this.tree={label:"no catalog loaded"},this.filterText="",this.filterService=t}return t.prototype.ngAfterViewInit=function(){this.catalog&&this.buildTree()},t.prototype.ngOnChanges=function(t){t.catalog&&this.catalog&&(this.filterText="",this.buildTree(),this.highlightLayers([],this.tree))},t.prototype.buildTree=function(){var t=this,e=this;this.layers=[];var r=this.catalog,n={label:r.name,expanded:!0,visible:!0},i=r.themes.map((function(t){return t.layers.filter((function(t){return t.path&&!t.skip}))})).reduce((function(t,e){return t.concat(e)}),[]),o=r.themes.filter((function(t){return t.path&&!t.skip})),a=this.layerActions.map((function(e){return{icon:e.icon,tooltip:e.tooltip,action:function(r){return t.layerClick(r.data,e.action)}}})),s=function(e){var r={label:e.name,data:e,visible:!0,actions:a},n=new K;return n.layer=e,n.update(),e.description?r.tooltip=g.of(e.description):r.tooltip=t.metadata.getMetadata(n).pipe(p.map((function(t){return t[e.descriptionField||"long_name"]}))),r};function l(t){return{label:t.name,expanded:!1,visible:!0,children:t.layers.filter((function(t){return!t.path&&!t.skip})).filter((function(t){return e.showPlaceholders||!t.placeholder})).map(s)}}function b(t){var e,r,i,o,a=t.split("/"),s=n,g=-1;try{for(var p=m(a),l=p.next();!l.done;l=p.next()){var b=l.value,u=b.split("@");b=u[0],g=-1,u.length>1&&(g=+u[1]);var d=!1;try{for(var h=(i=void 0,m(s.children)),y=h.next();!y.done;y=h.next()){var f=y.value;if(f.label===b){s=f,d=!0;break}}}catch(t){i={error:t}}finally{try{y&&!y.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}if(!d){var v={label:b,expanded:!1,visible:!0,children:[]};c(s,v,g),s=v}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(r=p.return)&&r.call(p)}finally{if(e)throw e.error}}return[s,g]}function c(t,e,r){r<0?t.children.push(e):t.children.splice(r,0,e)}n.children=r.themes.filter((function(t){return!t.path&&!t.skip})).map(l),o.forEach((function(t){var e=v(b(t.path),2),r=e[0],n=e[1];c(r,l(t),n)})),i.forEach((function(t){var e=v(b(t.path),2),r=e[0],n=e[1];c(r,s(t),n)})),this.tree=n},t.prototype.layerClick=function(t,e){var r={layer:t,action:e};this.layerSelected.emit(r)},t.prototype.nodeSelected=function(t){if(t.data){var e=t.data;this.layerClick(e,this.defaultAction)}},t.prototype.activeLayers=function(t){this.highlightLayers(t,this.tree)},t.prototype.highlightLayers=function(t,e){if(e.klass=null,e.data&&t.indexOf(e.data)>=0)return e.klass="active-layer",!0;if(e.children){for(var r=!1,n=0;n<e.children.length;n++)r=this.highlightLayers(t,e.children[n])||r;return r&&(e.klass="active-child"),e.klass=(e.klass||"")+" theme",r}return!1},t.ctorParameters=function(){return[{type:C},{type:P}]},y([e.Input(),f("design:type",B)],t.prototype,"catalog",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"showPlaceholders",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"defaultAction",void 0),y([e.Input(),f("design:type",Array)],t.prototype,"layerActions",void 0),y([e.Output(),f("design:type",e.EventEmitter)],t.prototype,"layerSelected",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"collapsedIcon",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"expandedIcon",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"leafIcon",void 0),t=y([e.Component({selector:"catalog",template:'<div class="input-group">\n  <span class="input-group-btn">\n            <button class="btn" type="button" [disabled]="!filterText"\n              (click)="filterText = \'\'">\n            <i *ngIf="filterText"class="fa fa-times" aria-hidden="true"></i>\n            <i *ngIf="!filterText"class="fa fa-search" aria-hidden="true"></i>\n            </button>\n  </span>\n  <input #filterInput type="text" class="form-control" placeholder="Catalog search..."\n  [(ngModel)]="filterText"/>\n</div>\n\n<simple-tree \n  [tree]="this.filterService.filterTree(tree, filterText)"\n  [showTop]="false"\n  [leafIcon]="leafIcon"\n  [collapsedIcon]="collapsedIcon"\n  [expandedIcon]="expandedIcon"\n  (nodeSelected)="nodeSelected($event)">\n</simple-tree>\n',styles:["\n.node-name{\n  font-size:1em;\n}\n"]}),f("design:paramtypes",[C,P])],t)}(),Pt=function(){function t(t){this.timeUtils=t,this.dateChange=new e.EventEmitter,this.style="arrows",this.stepDays=1,this.referenceDate=null,this.need={day:!0,month:!0,year:!0},this.atMax=!1,this.atMin=!1}return t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnChanges=function(t){t.minDate&&(this.minDateStruct=this.timeUtils.convertDate(this.minDate)),t.maxDate&&(this.maxDateStruct=this.timeUtils.convertDate(this.maxDate)),t.date&&(this.dateStruct=this.timeUtils.convertDate(this.date)),t.timestep&&this.assessDateComponents(),this.checkLimits()},t.prototype.dateStructChanged=function(){this.date=new Date(Date.UTC(this.dateStruct.year,this.dateStruct.month-1,this.dateStruct.day)),this.checkReference(),this.dateChange.emit(this.date)},t.prototype.assessDateComponents=function(){this.need.day=this.need.month=this.need.year=!0,"daily"!==this.timestep&&(this.need.day=!1,"annual"===this.timestep&&(this.need.month=!1))},t.prototype.move=function(t){this.date=new Date(this.date&&this.date.getTime()),this.date.setDate(this.date.getDate()+t),this.onDateChanged(),this.dateChange.emit(this.date)},t.prototype.onDateChanged=function(){this.checkLimits()},t.prototype.checkLimits=function(){this.atMax=this.timeUtils.datesEqual(this.dateStruct,this.maxDateStruct),this.atMin=this.timeUtils.datesEqual(this.dateStruct,this.minDateStruct)},t.prototype.checkReference=function(){if(this.referenceDate){var t=E.interpolate(this.referenceDate,{year:this.date.getFullYear(),month:this.date.getMonth()+1,date:this.date.getDate()}).split("-").map((function(t){return+t})),e=new Date(Date.UTC(t[0],t[1]-1,t[2]));console.log("currentRef",e),console.log("currentDate",this.date);var r=864e5*this.stepDays,n=(this.date.getTime()-e.getTime())/r;this.date=new Date(e.getTime()+Math.round(n)*r),this.dateStruct=this.timeUtils.convertDate(this.date)}},t.ctorParameters=function(){return[{type:x}]},y([e.Input(),f("design:type",Date)],t.prototype,"date",void 0),y([e.Output(),f("design:type",Object)],t.prototype,"dateChange",void 0),y([e.Input(),f("design:type",String)],t.prototype,"timestep",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"minDate",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"maxDate",void 0),y([e.Input(),f("design:type",String)],t.prototype,"style",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"stepDays",void 0),y([e.Input(),f("design:type",String)],t.prototype,"referenceDate",void 0),t=y([e.Component({selector:"date-selection",template:'<div class="date-control container-fluid">\n  <div *ngIf="style!==\'arrows\'" class="row no-gutters">\n    <div class="col-8 form-group-inline">\n        <div class="input-group input-group-sm">\n          <input class="form-control form-control-sm" placeholder="yyyy-mm-dd"\n                 name="dp" [(ngModel)]="dateStruct" (ngModelChange)="dateStructChanged()"\n                 ngbDatepicker #d="ngbDatepicker"\n                 [maxDate]="maxDateStruct" [minDate]="minDateStruct">\n          <div class="input-group-addon" (click)="d.toggle()" >\n            <i class="fa fa-calendar"></i>\n          </div>\n        </div>\n      </div>\n\n    \x3c!--\n      <div class="col-2" >\n        <button class="btn btn-secondary btn-sm" [disabled]="atMax"\n                (click)="move(1)"><i class="fa fa-chevron-right"></i></button>\n      </div>\n    --\x3e\n  </div>\n\n  <div *ngIf="style===\'arrows\'">\n    <date-element *ngIf="need.day"   [src]="dateStruct" [property]="\'day\'" [label]="\'Day\'"\n                  [step]="stepDays"\n                  (changed)="dateStructChanged()"></date-element>\n    <date-element *ngIf="need.month" [src]="dateStruct" [property]="\'month\'" [label]="\'Month\'"\n                  (changed)="dateStructChanged()"></date-element>\n    <date-element *ngIf="need.year"  [src]="dateStruct" [property]="\'year\'" [label]="\'Year\'"\n                  (changed)="dateStructChanged()"></date-element>\n  </div>\n</div>\n'}),f("design:paramtypes",[x])],t)}(),jt=function(){function t(t){this.pointSelectionService=t,this.getKeys=Object.keys,this.propertyChanged=new e.EventEmitter,this.tooltipPlacement="right",this.availableTags=null,this.tags={},this.pointVariables=[]}return Object.defineProperty(t.prototype,"publication",{get:function(){return this.layer&&this.layer.layer&&this.layer.layer.publications?this.layer.layer.publications[this.layer.options.publication||0]:null},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){var t=this;this.map&&(this.selectedFeatureSubscription=this.map.featureSelected.subscribe((function(e){return t.featureSelected(e)}))),this.layer&&setTimeout((function(){t.findTags()}))},t.prototype.ngOnDestroy=function(){this.selectedFeatureSubscription&&this.selectedFeatureSubscription.unsubscribe()},t.prototype.featureSelected=function(t){this.publication&&this.publication.pointdata&&(this.selectedFeature=t.feature,this.queryPointData())},t.prototype.publicationSelected=function(t){this.layer.options.publication=t,this.publication.pointdata&&(this.pointSelectionChanged(),this.updateVariables()),this.update(t)},t.prototype.updateLayer=function(){this.layer.options.tags=this.tags,this.layer.update(),this.propertyChanged.emit(this.layer)},t.prototype.update=function(t){var e=this;this.updateLayer(),setTimeout((function(){e.findTags()}))},t.prototype.processTags=function(t){if(!t)return null;var e={};return Object.keys(t).forEach((function(r){var n=t[r];e[r]=n.map((function(t){var e=t;if(e.value&&e.label)return e;return{value:t,label:t}}))})),e},t.prototype.findTags=function(){this.publication.pointdata?this.availableTags=this.processTags(this.publication.pointdata.tags):this.availableTags=this.processTags(this.layer.flattenedSettings.options.tags),this.setDefaultTags()},t.prototype.tagChanged=function(t){this.queryPointData(),this.update(null)},t.prototype.setDefaultTags=function(){var t=this;this.availableTags&&(Object.keys(this.availableTags).forEach((function(e){void 0===t.tags[e]&&(t.tags[e]=t.availableTags[e][0].value)})),this.updateLayer())},t.prototype.zoomToExtent=function(){this.map?(this.map.lat=this.layer.layer.lat,this.map.lng=this.layer.layer.lon,this.map.zoom=this.layer.layer.zoom||13):console.log("NO MAP!")},t.prototype.pointSelection=function(){return{catalog:this.publication.pointdata,variable:this.selectedVariable,feature:this.selectedFeature,tags:this.tags}},t.prototype.queryPointData=function(){this.publication&&this.publication.pointdata;this.publication&&this.publication.pointdata&&(this.pointSelectionChanged(),this.updateVariables())},t.prototype.updateVariables=function(){var t=this,e=this.pointSelection();this.pointSelectionService.timeseriesVariables(e).subscribe((function(e){t.pointVariables=e.slice(),t.publication.pointdata.exclude&&(t.pointVariables=t.pointVariables.filter((function(e){return!t.publication.pointdata.exclude.some((function(t){return!!e.value.match(t)}))}))),t.pointVariables.length?t.pointVariables.findIndex((function(e){return e.value===t.selectedVariable}))<0&&(t.pointVariables.findIndex((function(e){return e.value===t.publication.pointdata.defaultVariable}))>=0?t.selectedVariable=t.publication.pointdata.defaultVariable:t.selectedVariable=t.pointVariables[0].value):t.selectedVariable=null,t.pointSelectionChanged()}))},t.prototype.pointSelectionChanged=function(){this.pointSelectionService.pointSelection(this.pointSelection())},t.ctorParameters=function(){return[{type:R}]},y([e.Input(),f("design:type",K)],t.prototype,"layer",void 0),y([e.Input(),f("design:type",yt)],t.prototype,"map",void 0),y([e.Output(),f("design:type",Object)],t.prototype,"propertyChanged",void 0),y([e.Input(),f("design:type",String)],t.prototype,"tooltipPlacement",void 0),t=y([e.Component({selector:"layer-properties",template:'<div class="container-fluid">\n  <p><strong>{{layer?.title}}</strong>\n    <span *ngIf="layer.description()" \n    [ngbTooltip]="layer.description()"\n    [placement]="tooltipPlacement"\n    class="layer-info-target"\n    container="body">\n  &nbsp;<i class="fa fa-info-circle"></i>\n  </span>\n  &nbsp;<span *ngIf="layer.interpolatedDownloadURL">\n    <small><a target="_blank" \n              [href]="layer.interpolatedDownloadURL"\n              [ngbTooltip]="\'Download data\'"\n              container="body">\n      <i class="fa fa-download"></i>\n    </a></small>\n  </span>\n  </p>\n\n  <div *ngIf="layer?.layer.publications.length>1">\n    <span *ngIf="layer.layer.publications[0].timestep">Timestep </span>\n    <span *ngIf="!layer.layer.publications[0].timestep">{{ layer.layer.options.publicationLabel || \'Variable\' }} </span>\n    <select [(ngModel)]="layer.options.publication" (ngModelChange)="publicationSelected($event)">\n      <option *ngFor="let p of layer.layer.publications; let i=index" [ngValue]="i">{{p.label || p.timestep}}</option>\n    </select>\n  </div>\n  <div *ngIf="layer?.layer.publications.length===1">\n    {{publication?.label}}\n  </div>\n\n  <div *ngIf="publication&&publication.timestep">\n    <hr/>\n    <date-selection [(date)]="layer.options.date"\n      (dateChange)="update($event)"\n      [timestep]="publication.timestep"\n      [stepDays]="publication.timestepMultiplier||1"\n      [referenceDate]="publication.timestepReference"\n      [minDate]="publication.options.start"\n      [maxDate]="publication.options.end"></date-selection>\n  </div>\n\n  <div *ngIf="layer.layer.options.smallExtent">\n    <hr/>\n    <button class="btn btn-sm btn-primary" (click)="zoomToExtent()">Zoom to Extent</button>\n  </div>\n\n\x3c!--\n  <div *ngIf="layer.layer.options.vectors">\n    <p>Lets filter those {{layer.layer.options.vectors}}s, eh?</p>\n  </div>\n--\x3e\n\n  <div *ngIf="availableTags">\n    <div *ngFor="let tag of getKeys(availableTags)">\n      {{tag}}\n      <select [(ngModel)]="tags[tag]" (ngModelChange)="tagChanged(tag)">\n        <option *ngFor="let val of availableTags[tag]" [ngValue]="val.value">{{val.label}}</option>\n      </select> \n    </div>\n  </div>\n\n  <div *ngIf="publication?.pointdata">\n    Variable:\n    <select [(ngModel)]="selectedVariable" (ngModelChange)="queryPointData()">\n      <option *ngFor="let v of pointVariables" [ngValue]="v.value">{{v.label}}</option>\n    </select>\n  </div>\n  \x3c!--\n  <div *ngIf="publication">\n    <p>Start: {{publication.options.start}}</p>\n    <p>End: {{publication.options.end}}</p>\n    <p>{{publication|json}}</p>\n  </div>\n  <button (click)="update()">Force update...</button>\n  --\x3e\n</div>'}),f("design:paramtypes",[R])],t)}(),Et=function(){function t(t){this.metadata=t,this.allowRemove=!0,this.showLegends=!0,this.allowReorder=!0,this.layersChange=new e.EventEmitter,this.foo="bar"}return t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnChanges=function(t){t.layers&&this.layers&&(this.applyViewMode(),this.fetchMetadata())},t.prototype.applyViewMode=function(){var t=this;void 0!==this.uniformViewMode&&this.layers.forEach((function(e){return e.options.legend=t.uniformViewMode}))},t.prototype.allLegends=function(t){this.uniformViewMode=t,this.layers.forEach((function(e){return e.options.legend=t}))},t.prototype.layerLegend=function(t,e){this.uniformViewMode=void 0,t.options.legend=e},t.prototype.moveToTop=function(t){this.layers=[this.layers[t]].concat(this.layers.slice(0,t)).concat(this.layers.slice(t+1)),this._changed()},t.prototype.moveUp=function(t){if(0!==t){var e=this.layers;this.layers=e.slice(0,t-1).concat([e[t],e[t-1]]).concat(e.slice(t+1)),this._changed()}},t.prototype.moveDown=function(t){if(t!==this.layers.length-1){var e=this.layers;this.layers=e.slice(0,t).concat([e[t+1],e[t]]).concat(e.slice(t+2)),this._changed()}},t.prototype.moveToBottom=function(t){this.layers=this.layers.slice(0,t).concat(this.layers.slice(t+1)).concat([this.layers[t]]),this._changed()},t.prototype.removeLayer=function(t){var e=this.layers.slice();e.splice(t,1),this.layers=e,this._changed()},t.prototype.layerPropertyChanged=function(t){this.layers=this.layers.slice(),this._changed()},t.prototype._changed=function(){this.fetchMetadata(),this.layersChange.emit(this.layers)},t.prototype.fetchMetadata=function(){var t=this;this.layers.forEach((function(e){t.metadata.populateMetadata(e)}))},t.ctorParameters=function(){return[{type:P}]},y([e.Input(),f("design:type",Array)],t.prototype,"layers",void 0),y([e.Input(),f("design:type",yt)],t.prototype,"map",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"allowRemove",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"showLegends",void 0),y([e.Input(),f("design:type",Object)],t.prototype,"allowReorder",void 0),y([e.Output(),f("design:type",Object)],t.prototype,"layersChange",void 0),t=y([e.Component({selector:"layer-control",template:'<div class="layers-control">\n  <div *ngIf="showLegends" class="layers-control-header"> \x3c!-- header --\x3e\n    <div class="float-right">\n      \x3c!-- TODO Attach handlers and tooltips to each icon --\x3e\n      <i class="fa fa-lg fa-cog discrete-icon" (click)="allLegends(false)"></i>\n      <i class="fa fa-lg fa-th-list discrete-icon" (click)="allLegends(true)"></i>\n    </div>\n    <br/>\n  </div>\n\n  <div *ngIf="layers">\n    <div *ngFor="let l of layers; let i = index"\n         class="layer-control d-flex justify-content-between">\n      <div class="p-2" style="width:100%">\n        <div *ngIf="showLegends&&l.options.legend">\n          <div *ngIf="l.flattenedSettings?.palette || l.legendURL">\n            <map-legend [title]="l.title"\n              [imageURL]="l.legendURL"\n              [helpText]="l.description()"\n              [mapUnits]="l.flattenedSettings?.units"\n              [cbPalette]="l.flattenedSettings?.palette?.name||l.flattenedSettings?.palette"\n              [cbCount]="l.flattenedSettings?.numcolorbands||l.flattenedSettings?.palette?.count"\n              [cbReverse]="l.flattenedSettings?.palette?.reverse"\n              [cbRange]="l.flattenedSettings?.colorscalerange">\n            </map-legend>\n          </div>\n        </div>\n\n        <div *ngIf="!showLegends||!l.options.legend">\n          <layer-properties [layer]="l"\n                            [map]="map"\n                            (propertyChanged)="layerPropertyChanged($event)">\n          </layer-properties>\n        </div>\n      </div>\n      <div class="p-2">\n          <div>\n            \x3c!-- TODO Attach handlers and tooltips to each icon --\x3e\n            <i *ngIf="allowReorder" class="fa fa-bars discrete-icon"></i><br *ngIf="allowReorder"/>\n            <i *ngIf="showLegends" class="fa fa-cog discrete-icon"\n               ngbTooltip="Show layer controls" placement="right" data-container="body"\n               (click)="layerLegend(l,false)"></i><br *ngIf="showLegends"/>\n            <i *ngIf="showLegends" class="fa fa-th-list discrete-icon"\n               ngbTooltip="Show layer data" placement="right" data-container="body"\n               (click)="layerLegend(l,true)"></i><br *ngIf="showLegends"/>\n            <i *ngIf="allowReorder" class="fa fa-angle-double-up discrete-icon"\n               ngbTooltip="Move to top" placement="right" data-container="body"\n              (click)="moveToTop(i)"></i><br *ngIf="allowReorder"/>\n            <i *ngIf="allowReorder" class="fa fa-angle-up discrete-icon"\n               ngbTooltip="Move up" placement="right" data-container="body"\n              (click)="moveUp(i)"></i><br *ngIf="allowReorder"/>\n            <i *ngIf="allowReorder" class="fa fa-angle-down discrete-icon"\n               ngbTooltip="Move down" placement="right" data-container="body"\n              (click)="moveDown(i)"></i><br *ngIf="allowReorder"/>\n            <i *ngIf="allowReorder" class="fa fa-angle-double-down discrete-icon"\n               ngbTooltip="Move to bottom" placement="right" data-container="body"\n              (click)="moveToBottom(i)"></i><br *ngIf="allowReorder"/>\n            <i *ngIf="allowRemove" class="fa fa-times discrete-icon"\n               ngbTooltip="Remove layer" placement="right" data-container="body"\n              data-toggle="tooltip" title="Remove layer"\n              (click)="removeLayer(i)"></i>\n          </div>\n        </div>\n      </div>\n  </div>\n</div>\n\n\x3c!-- Should this control be outside the map? eg to the left? --\x3e\n',styles:[".layers-control{\n  width:200px;\n}\n\n\n.layers-control-header, .layer-control{\n  border-bottom: 1.5px solid #aaa;\n}"]}),f("design:paramtypes",[P])],t)}(),Rt=function(){function t(){this.layerSelected=new e.EventEmitter}return t.prototype.ngAfterViewInit=function(){},t.prototype.layerClick=function(t,e,r){this.stop(t);var n={layer:e,action:r};this.layerSelected.emit(n)},t.prototype.stop=function(t){t.preventDefault(),t.stopPropagation()},y([e.Input(),f("design:type",B)],t.prototype,"catalog",void 0),y([e.Input(),f("design:type",Boolean)],t.prototype,"includeSearch",void 0),y([e.Output(),f("design:type",e.EventEmitter)],t.prototype,"layerSelected",void 0),t=y([e.Component({selector:"theme-navbar",template:'<ul class="navbar-nav">\n  <li class="nav-item" ngbDropdown *ngFor="let theme of catalog?.themes">\n    <a class="nav-link" ngbDropdownToggle href="#"><i class="fa" [ngClass]="theme.icon"></i></a>\n    <div ngbDropdownMenu class="dropdown-menu">\n      <a class="dropdown-item" href="#" (click)="layerClick($event,layer,\'replace\')" *ngFor="let layer of theme.layers">\n        <div>\n          <span>{{layer.name}}</span>\n          <span class="float-right layer-select-icons">\n            <i class="fa fa-map layer-select-icon discrete-icon"\n               (click)="layerClick($event,layer,\'replace\')"\n               placement="right"\n               ngbTooltip="Map this layer. (Replace any existing layers)"></i>\n            <br/>\n            <i class="fa fa-plus layer-select-icon discrete-icon"\n               (click)="layerClick($event,layer,\'add\')"\n               placement="right"\n               ngbTooltip="Add this layer to the map."></i>\n          </span>\n        </div>\n      </a>\n    </div>\n  </li>\n</ul>\n\n\x3c!--\n\n[ng-reflect-ngb-tooltip].yellow + .tooltip {\n    background-color: yellow;\n}\n--\x3e',styles:["\n.layer-select-icons{\n  font-size:0.75em;\n  margin-right:-20px;\n}\n\n/* Annoying... using /deep/ to access the child component\n * but /deep/ (and synonyms) are deprecated. Not clear what\n * we should be doing\n */\n/deep/ .tooltip-inner {\n  width: 400px;\n}\n\n.dropdown-item{\n  border-bottom: 1px solid #aaa;\n  height: 40px;\n}\n"]}),f("design:paramtypes",[])],t)}(),_t=[bt,ct,ut,dt,ht,ft,mt,vt,It,Ct,wt,Tt,St,xt,Ot,Mt,Dt,Lt,kt,Pt,jt,Et,yt,Rt,gt,pt,lt],Ft=function(){function t(){}return t=y([e.NgModule({imports:[s.CommonModule,r.FormsModule,a.AgmCoreModule,i.HttpClientModule,o.NgPipesModule,n.NgbModule,st],declarations:_t,exports:_t,providers:[]})],t)}();var At=function(){function t(){}return t=y([e.NgModule({imports:[s.CommonModule,r.FormsModule,a.AgmCoreModule,i.HttpClientModule,o.NgPipesModule,n.NgbModule,Ft,st],declarations:[],exports:[],providers:[]})],t)}();t.AvailableDatesService=_,t.BaseMapSelectionComponent=Mt,t.ButtonBarComponent=Tt,t.Catalog=B,t.CatalogComponent=kt,t.CatalogOptions=q,t.CatalogService=tt,t.CollapsibleMapControlComponent=Ot,t.CycleBaseMapComponent=Ct,t.CycleOpacityComponent=wt,t.DateElementComponent=ut,t.DateSelectionComponent=Pt,t.DateShifterComponent=bt,t.FeatureTableComponent=xt,t.GeocodingService=it,t.INTERPOLATED_PARAMETERS=X,t.InterpolationService=E,t.LAT_NAMES=D,t.LNG_NAMES=L,t.Layer=G,t.LayerControlComponent=Et,t.LayerPropertiesComponent=jt,t.LayeredMapComponent=yt,t.LocationSearchComponent=ht,t.MapControlComponent=lt,t.MapLegendComponent=pt,t.MapViewParameterService=et,t.MapWaldBootstrapModule=Ft,t.MapWaldCoreModule=st,t.MapWaldModule=At,t.MappedLayer=K,t.MetadataService=P,t.OneTimeSplashComponent=ct,t.OpendapService=M,t.PaletteService=T,t.PointSelectionService=R,t.ProjectionService=ot,t.Publication=H,t.ShareViewComponent=dt,t.SimpleTreeComponent=Lt,t.SimpleTreeNodeComponent=Dt,t.StaticDataService=O,t.TIME_NAMES=k,t.Theme=z,t.ThemeNavbarComponent=Rt,t.TimeUtilsService=x,t.TimeseriesChartComponent=St,t.TimeseriesService=j,t.WMSLayerComponent=gt,t.WMSService=nt,t.WMS_PARAMETER_NAMES=J,t.WMS_URL_FORMAT=Q,t.ZoomFullComponent=mt,t.ZoomInComponent=It,t.ZoomLayerComponent=ft,t.ZoomOutComponent=vt,t.components=_t,t.parseCSV=function(t){var e=t.split("\n"),r=e[0];e=e.slice(1);var n=r.split(",");return e.filter((function(t){return t.length})).map((function(t){var e=t.split(","),r={};return e.forEach((function(t,e){r[n[e]]=function(t){var e=t.split("-");if(3===e.length){var r=e.map((function(t){return+t}));if(!r.some(isNaN))return new Date(Date.UTC(r[0],r[1]-1,r[2]))}if(""===t)return t;var n=+t;if(!isNaN(n))return n;return t}(t)})),r}))},t.services=at,t.utcDate=S,t.utcDateCopy=function(t){return S(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())},t.ɵ0=Z,t.ɵ1=Y,t.ɵa=C,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=map-wald.umd.min.js.map