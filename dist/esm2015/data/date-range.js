import { utcDate } from '../time-utils.service';
const MAXIMUM_DATE_SHIFT = 60;
export class DateRange {
    static dateFromConfig(json, end) {
        if (!json) {
            return new Date();
        }
        if ('number' === typeof json) {
            if (json < MAXIMUM_DATE_SHIFT) {
                let d = new Date();
                d.setUTCDate(d.getUTCDate() + json);
                return d;
            }
            if (end) {
                return utcDate(json, 11, 31);
            }
            return utcDate(json, 0, 1);
        }
        // ? expect a string and parse out dd/mm/yyyy?
        var [yyyy, mm, dd] = json.split('/').map(elem => +elem);
        return new Date(yyyy, mm - 1, dd);
    }
    static fromJSON(json) {
        var result = new DateRange();
        if (json) {
            result.start = DateRange.dateFromConfig(json.start);
            result.end = DateRange.dateFromConfig(json.end, true);
            result.format = json.format || result.format;
            result.interval = json.interval || result.interval;
        }
        return result;
    }
    containsYear(yr) {
        return (yr >= this.start.getUTCFullYear()) &&
            (yr <= this.end.getUTCFullYear());
    }
    contains(d) {
        let yr = d.getUTCFullYear();
        if ((yr < this.start.getUTCFullYear()) ||
            (yr > this.end.getUTCFullYear())) {
            return false;
        }
        if (yr < this.end.getUTCFullYear()) {
            return true;
        }
        return d <= this.end;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1yYW5nZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9kYXRhL2RhdGUtcmFuZ2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE9BQU8sRUFBVyxNQUFNLHVCQUF1QixDQUFDO0FBYXpELE1BQU0sa0JBQWtCLEdBQUMsRUFBRSxDQUFDO0FBRTVCLE1BQU0sT0FBTyxTQUFTO0lBTXBCLE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBUyxFQUFFLEdBQWE7UUFDNUMsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNULE9BQU8sSUFBSSxJQUFJLEVBQUUsQ0FBQztTQUNuQjtRQUVELElBQUksUUFBUSxLQUFLLE9BQU8sSUFBSSxFQUFFO1lBQzVCLElBQUksSUFBSSxHQUFHLGtCQUFrQixFQUFFO2dCQUM3QixJQUFJLENBQUMsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO2dCQUNuQixDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxVQUFVLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztnQkFDcEMsT0FBTyxDQUFDLENBQUM7YUFDVjtZQUNELElBQUksR0FBRyxFQUFFO2dCQUNQLE9BQU8sT0FBTyxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDOUI7WUFFRCxPQUFPLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQzVCO1FBRUQsOENBQThDO1FBQzlDLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN4RCxPQUFPLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ3BDLENBQUM7SUFFRCxNQUFNLENBQUMsUUFBUSxDQUFDLElBQVM7UUFDdkIsSUFBSSxNQUFNLEdBQUcsSUFBSSxTQUFTLEVBQUUsQ0FBQztRQUU3QixJQUFHLElBQUksRUFBQztZQUNOLE1BQU0sQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDcEQsTUFBTSxDQUFDLEdBQUcsR0FBRyxTQUFTLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDdEQsTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUM7WUFDN0MsTUFBTSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUM7U0FDcEQ7UUFFRCxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDO0lBRUQsWUFBWSxDQUFDLEVBQVU7UUFDckIsT0FBTyxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ3hDLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRUQsUUFBUSxDQUFDLENBQVM7UUFDaEIsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBRTVCLElBQUcsQ0FBQyxFQUFFLEdBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztZQUNoQyxDQUFDLEVBQUUsR0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRSxDQUFDLEVBQUM7WUFDaEMsT0FBTyxLQUFLLENBQUM7U0FDZDtRQUVELElBQUcsRUFBRSxHQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFLEVBQUM7WUFDOUIsT0FBTyxJQUFJLENBQUM7U0FDYjtRQUNELE9BQU8sQ0FBQyxJQUFFLElBQUksQ0FBQyxHQUFHLENBQUM7SUFDckIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXRjRGF0ZSwgVVRDRGF0ZSB9IGZyb20gJy4uL3RpbWUtdXRpbHMuc2VydmljZSc7XG5cblxuLy8gZXhwb3J0IGludGVyZmFjZSBMYXllclRpbWVQZXJpb2Qge1xuLy8gICB0aW1lcGVyaW9kPzogbnVtYmVyW107XG4vLyB9XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGltZUludGVydmFsIHtcbiAgZGF5cz86IG51bWJlcjtcbiAgbW9udGhzPzogbnVtYmVyO1xuICB5ZWFycz86IG51bWJlcjtcbn1cblxuY29uc3QgTUFYSU1VTV9EQVRFX1NISUZUPTYwO1xuXG5leHBvcnQgY2xhc3MgRGF0ZVJhbmdlIHtcbiAgc3RhcnQ6IFVUQ0RhdGU7XG4gIGVuZDogVVRDRGF0ZTtcbiAgZm9ybWF0OiBzdHJpbmc7XG4gIGludGVydmFsPzogVGltZUludGVydmFsO1xuXG4gIHN0YXRpYyBkYXRlRnJvbUNvbmZpZyhqc29uOiBhbnksIGVuZD86IGJvb2xlYW4pOiBVVENEYXRlIHtcbiAgICBpZiAoIWpzb24pIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZSgpO1xuICAgIH1cblxuICAgIGlmICgnbnVtYmVyJyA9PT0gdHlwZW9mIGpzb24pIHtcbiAgICAgIGlmIChqc29uIDwgTUFYSU1VTV9EQVRFX1NISUZUKSB7XG4gICAgICAgIGxldCBkID0gbmV3IERhdGUoKTtcbiAgICAgICAgZC5zZXRVVENEYXRlKGQuZ2V0VVRDRGF0ZSgpICsganNvbik7XG4gICAgICAgIHJldHVybiBkO1xuICAgICAgfVxuICAgICAgaWYgKGVuZCkge1xuICAgICAgICByZXR1cm4gdXRjRGF0ZShqc29uLCAxMSwgMzEpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdXRjRGF0ZShqc29uLCAwLCAxKTtcbiAgICB9XG5cbiAgICAvLyA/IGV4cGVjdCBhIHN0cmluZyBhbmQgcGFyc2Ugb3V0IGRkL21tL3l5eXk/XG4gICAgdmFyIFt5eXl5LCBtbSwgZGRdID0ganNvbi5zcGxpdCgnLycpLm1hcChlbGVtID0+ICtlbGVtKTtcbiAgICByZXR1cm4gbmV3IERhdGUoeXl5eSwgbW0gLSAxLCBkZCk7XG4gIH1cblxuICBzdGF0aWMgZnJvbUpTT04oanNvbjogYW55KTogRGF0ZVJhbmdlIHtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IERhdGVSYW5nZSgpO1xuXG4gICAgaWYoanNvbil7XG4gICAgICByZXN1bHQuc3RhcnQgPSBEYXRlUmFuZ2UuZGF0ZUZyb21Db25maWcoanNvbi5zdGFydCk7XG4gICAgICByZXN1bHQuZW5kID0gRGF0ZVJhbmdlLmRhdGVGcm9tQ29uZmlnKGpzb24uZW5kLCB0cnVlKTtcbiAgICAgIHJlc3VsdC5mb3JtYXQgPSBqc29uLmZvcm1hdCB8fCByZXN1bHQuZm9ybWF0O1xuICAgICAgcmVzdWx0LmludGVydmFsID0ganNvbi5pbnRlcnZhbCB8fCByZXN1bHQuaW50ZXJ2YWw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGNvbnRhaW5zWWVhcih5cjogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh5ciA+PSB0aGlzLnN0YXJ0LmdldFVUQ0Z1bGxZZWFyKCkpICYmXG4gICAgICAoeXIgPD0gdGhpcy5lbmQuZ2V0VVRDRnVsbFllYXIoKSk7XG4gIH1cblxuICBjb250YWlucyhkOlVUQ0RhdGUpOmJvb2xlYW57XG4gICAgbGV0IHlyID0gZC5nZXRVVENGdWxsWWVhcigpO1xuXG4gICAgaWYoKHlyPHRoaXMuc3RhcnQuZ2V0VVRDRnVsbFllYXIoKSl8fFxuICAgICAgICh5cj50aGlzLmVuZC5nZXRVVENGdWxsWWVhcigpKSl7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYoeXI8dGhpcy5lbmQuZ2V0VVRDRnVsbFllYXIoKSl7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGQ8PXRoaXMuZW5kO1xuICB9XG59XG4iXX0=